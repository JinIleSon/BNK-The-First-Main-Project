<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mypage_prodCancel</title>
    <link rel="stylesheet" href="../../components/button.css">
    <style>
        main {
            background-color: #F6F6F8;
            padding: 80px 20px;
        }
        body {
            background-color: #F6F6F8;
        }
        /* 공통 링크(카드 전체 클릭) */
        .menu-link{ text-decoration:none; color:inherit; display:block; }

        /* 카드 기본 */
        .menu-card{
            background:#fff; width:280px; height:200px; border-radius:16px;
            border:1px solid #E5E7EB; box-shadow:0 2px 8px rgba(0,0,0,.05);
            transition: transform .22s ease, box-shadow .22s ease, border-color .22s ease, background-color .22s ease;
            cursor:pointer; will-change: transform;
        }

        /* Hover: 살짝 떠오르고 그림자 강화, 보더 강조 */
        .menu-card:hover{
            transform: translateY(-4px);
            box-shadow:0 10px 24px rgba(0,0,0,.10);
            border-color:#D1D5DB;        /* 더 선명한 테두리 */
            background-color:#FCFCFD;    /* 아주 미세한 톤 변화 */
        }

        /* Active(눌렀을 때): 프레스 느낌 */
        .menu-card:active{
            transform: translateY(-1px) scale(.995);
            box-shadow:0 6px 16px rgba(0,0,0,.08);
        }

        /* 키보드 포커스 접근성: 트렌디한 링 */
        .menu-link:focus-visible .menu-card{
            outline:none;
            box-shadow:0 0 0 2px #fff, 0 0 0 4px rgba(59,130,246,.55); /* 흰색-파랑 이중링 */
            transform: translateY(-2px);
        }

        /* 모션 최소화 선호 사용자 배려 */
        @media (prefers-reduced-motion: reduce){
            .menu-card, .menu-card:hover, .menu-card:active{
            transition:none; transform:none; box-shadow:0 2px 8px rgba(0,0,0,.05);
            }
            .menu-link:focus-visible .menu-card{ box-shadow:0 0 0 3px rgba(59,130,246,.55); }
        }
        </style>
        <style>
            .btn-register {
            --bg1: #D91A1A;
            --bg2: #F03A3A;
            --shadow: rgba(217,26,26,.45);
            position: relative;
            box-sizing: border-box;
            width: 90px; height: 42px;
            border: none; border-radius: 8px;
            color: #fff; cursor: pointer;
            background: linear-gradient(180deg, var(--bg2), var(--bg1));
            outline: none;
            box-shadow: 0 6px 14px -10px var(--shadow);
            transition:
                background .18s ease,
                box-shadow .18s ease,
                transform .12s ease; /* 프레스만 사용할 예정 */
            will-change: background, box-shadow, transform;
            }
            
            /* Hover: 컬러와 섀도우만 아주 미세하게 (리프트 없음) */
            .btn-register:hover {
            background: linear-gradient(180deg, #f24a4a, #d61a1a);
            box-shadow: 0 8px 18px -12px var(--shadow);
            transform: none; /* 확실하게 떠오르지 않도록 고정 */
            }
            
            /* Active: 살짝 눌리는 프레스 효과만 */
            .btn-register:active {
            transform: scale(.98);
            box-shadow: 0 4px 10px -10px var(--shadow);
            }
            
            /* 키보드 포커스 접근성 */
            .btn-register:focus-visible {
            outline: 3px solid rgba(240,58,58,.55);
            outline-offset: 2px;
            }
            
            /* 모션 최소화 존중 */
            @media (prefers-reduced-motion: reduce) {
            .btn-register { transition: none !important; }
            }
            
            @media (prefers-color-scheme: dark) {
            .btn-register { --shadow: rgba(240,58,58,.35); }
            }
        </style>
    <style>
          /* 공통 링크(카드 전체 클릭) */
          .menu-link{ text-decoration:none; color:inherit; display:block; }

          /* 카드 기본 */
          .menu-card{
            background:#fff; width:280px; height:200px; border-radius:16px;
            border:1px solid #E5E7EB; box-shadow:0 2px 8px rgba(0,0,0,.05);
            transition: transform .22s ease, box-shadow .22s ease, border-color .22s ease, background-color .22s ease;
            cursor:pointer; will-change: transform;
          }

          /* Hover: 살짝 떠오르고 그림자 강화, 보더 강조 */
          .menu-card:hover{
            transform: translateY(-4px);
            box-shadow:0 10px 24px rgba(0,0,0,.10);
            border-color:#D1D5DB;        /* 더 선명한 테두리 */
            background-color:#FCFCFD;    /* 아주 미세한 톤 변화 */
          }

          /* Active(눌렀을 때): 프레스 느낌 */
          .menu-card:active{
            transform: translateY(-1px) scale(.995);
            box-shadow:0 6px 16px rgba(0,0,0,.08);
          }

          /* 키보드 포커스 접근성: 트렌디한 링 */
          .menu-link:focus-visible .menu-card{
            outline:none;
            box-shadow:0 0 0 2px #fff, 0 0 0 4px rgba(59,130,246,.55); /* 흰색-파랑 이중링 */
            transform: translateY(-2px);
          }

          /* 모션 최소화 선호 사용자 배려 */
          @media (prefers-reduced-motion: reduce){
            .menu-card, .menu-card:hover, .menu-card:active{
              transition:none; transform:none; box-shadow:0 2px 8px rgba(0,0,0,.05);
            }
            .menu-link:focus-visible .menu-card{ box-shadow:0 0 0 3px rgba(59,130,246,.55); }
          }
        </style>
        <style>
          #aiReco{
            opacity: 1;
            /* opacity는 1.2s로 페이드, visibility는 1.2s 뒤에 적용(즉, 페이드 끝난 후 숨김) */
            transition: opacity .9s cubic-bezier(.22,.61,.36,1),
                        visibility 0s linear 1.2s;
            will-change: opacity;
          }

          #aiReco.is-fading{
            opacity: 0;
            visibility: hidden;   /* 지연되어 끝나고 적용됨 -> 모션 살아있음 */
            pointer-events: none; /* 클릭만 막기 */
          }

          /* X 아이콘(svg[data-close])의 포커스 아웃라인 제거 */
          #aiReco [data-close]:focus,
          #aiReco [data-close]:focus-visible {
            outline: none;
            box-shadow: none;
          }

          /* 모바일 클릭 시 파란/회색 하이라이트 제거 */
          #aiReco [data-close]{
            -webkit-tap-highlight-color: transparent;
          }
        </style>
        <style>
          .pw-wrap{ position:relative; margin-top:20px; }
          .pw-wrap .pw-input{
            box-sizing:border-box; outline:none;
            padding-left:15px; padding-right:42px; /* 버튼 자리 확보 */
            font-size:16px; width:100%; height:50px;
            border:1px solid #D1D5DB; border-radius:6px;
          }
          .pw-wrap .eye-btn{
            position:absolute; right:12px; top:50%;
            transform:translateY(-48%);
            width:28px; height:28px; padding:0; border:0; background:none; cursor:pointer;
          }
          .pw-wrap .eye-btn:focus-visible{ outline:2px solid rgba(59,130,246,.55); border-radius:6px; }
          .agree-option { cursor: pointer; user-select: none; }
          .agree-option * { cursor: inherit; }
        </style>
        <style>
          /* 카드 영역의 a 태그는 색이 안 변하도록 고정 */
          #summary-cards a,
          #summary-cards a:link,
          #summary-cards a:visited,
          #summary-cards a:hover,
          #summary-cards a:active {
            color: inherit;              /* 부모 색 따라감 */
            text-decoration: none;       /* 밑줄 제거 */
          }
        </style>
        <style>
          #btnFinal:disabled {
            opacity: .45;
            cursor: not-allowed;
            box-shadow: none;
            filter: grayscale(10%);
          }
        </style>
</head>
<body>
    <header>
        <div id="header"></div>
    </header>
    
    <main style="background-color: #F6F6F8; display: flex; justify-content: center; padding-top: 120px !important;">
    <div style="width: 1200px; ">
      <div>
        <div style="font-size: 24px; color: #4B5563;">상품 해지 신청</div>
        <div style="display: flex;">
          <div style="font-size: 16px; color: #4B5563;">해지할 상품을 선택하고, 유의사항을 확인한 뒤 신청을 완료하세요.</div>
        </div>
        <div style="margin-top:25px; padding:30px; box-sizing: border-box; background-color: white; width: 100%;border-radius: 16px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); border: 1px solid #E5E7EB;">
          <div style="font-size:20px; color:#2B2F36;">해지할 상품 선택</div>
            <div style="display: flex; gap: 30px;">
              <div id="summary-cards" style="display: flex; margin-top: 25px; gap: 30px;">
                <div style="background-color: white; width: 358px; border-radius: 16px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); border: 1px solid #E5E7EB;">
                  <div style="padding: 21px;">
                    <div>
                      <div style="display: flex;">
                        <div style="">
                          <label for="prod1" class="prod-select" style="display:block; cursor:pointer;">
                          <div style="display: flex; justify-content: center;">
                            <div style="display: flex; justify-content: center; align-items: center; border-radius: 8px; background-color: #ddeaff; width: 48px; height: 48px;">
                              <svg width="23" height="20" viewBox="0 0 23 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <g clip-path="url(#clip0_543_203)">
                                <path d="M15.625 3.75V3.77734C15.418 3.76172 15.2109 3.75 15 3.75H10C9.35547 3.75 8.73047 3.83203 8.13281 3.98438C8.12891 3.90625 8.125 3.82812 8.125 3.75C8.125 1.67969 9.80469 0 11.875 0C13.9453 0 15.625 1.67969 15.625 3.75ZM15 5C15.1367 5 15.2734 5.00391 15.4062 5.01172C15.5703 5.02344 15.7344 5.03906 15.8984 5.0625C16.5859 4.26172 17.6094 3.75 18.75 3.75H19.1992C19.6055 3.75 19.9023 4.13281 19.8047 4.52734L19.2656 6.68359C19.8828 7.26172 20.3867 7.96484 20.7305 8.75H21.25C21.9414 8.75 22.5 9.30859 22.5 10V13.75C22.5 14.4414 21.9414 15 21.25 15H20C19.6445 15.4727 19.2227 15.8945 18.75 16.25V18.75C18.75 19.4414 18.1914 20 17.5 20H16.25C15.5586 20 15 19.4414 15 18.75V17.5H10V18.75C10 19.4414 9.44141 20 8.75 20H7.5C6.80859 20 6.25 19.4414 6.25 18.75V16.25C4.88672 15.2266 3.95703 13.6602 3.78125 11.875H2.65625C1.1875 11.875 0 10.6875 0 9.21875C0 7.75 1.1875 6.5625 2.65625 6.5625H2.8125C3.33203 6.5625 3.75 6.98047 3.75 7.5C3.75 8.01953 3.33203 8.4375 2.8125 8.4375H2.65625C2.22656 8.4375 1.875 8.78906 1.875 9.21875C1.875 9.64844 2.22656 10 2.65625 10H3.875C4.34766 7.66406 6.12891 5.80078 8.41797 5.20312C8.92188 5.07031 9.45312 5 10 5H15ZM17.5 10.3125C17.5 10.0639 17.4012 9.8254 17.2254 9.64959C17.0496 9.47377 16.8111 9.375 16.5625 9.375C16.3139 9.375 16.0754 9.47377 15.8996 9.64959C15.7238 9.8254 15.625 10.0639 15.625 10.3125C15.625 10.5611 15.7238 10.7996 15.8996 10.9754C16.0754 11.1512 16.3139 11.25 16.5625 11.25C16.8111 11.25 17.0496 11.1512 17.2254 10.9754C17.4012 10.7996 17.5 10.5611 17.5 10.3125Z" fill="#2563EB"/>
                                </g>
                                <defs>
                                <clipPath id="clip0_543_203">
                                <path d="M0 0H22.5V20H0V0Z" fill="white"/>
                                </clipPath>
                                </defs>
                              </svg>
                            </div>
                            <div style="margin-left: 15px;">
                                <div style="color: #2B2F36; font-size: 16px;">정기예금</div>
                                <div style="color: #6B7280; font-size: 14px;">만기일: 2024.12.30</div>
                            </div>
                            <div style="margin-left: 110px;">
                              <input type="radio" name="what" id="prod1" style="scale: calc(1.7); cursor: pointer;">
                            </div>
                          </div>
                          <div style="display: flex; margin-top: 20px;">
                            <div>현재 잔액</div>
                            <div style="margin-left: auto;">10500000원</div>
                          </div>
                          <div style="display: flex; margin-top: 15px;">
                            <div>연 이자율</div>
                            <div style="margin-left: auto;">3.2%</div>
                          </div>
                          </label>
                          <div style="text-align: center; margin-top: 20px;">
                            <div><a href="#" style="text-decoration: none; color: red;">자세히 보기</a></div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div style="background-color: white; width: 357px; border-radius: 16px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); border: 1px solid #E5E7EB;">
                  <div style="padding: 21px;">
                    <div>
                      <div style="display: flex;">
                        <div style="">
                          <label for="prod2" class="prod-select" style="display:block; cursor:pointer;">
                          <div style="display: flex; justify-content: center;">
                            <div style="display: flex; justify-content: center; align-items: center; border-radius: 8px; background-color: #dffce6; width: 48px; height: 48px;">
                              <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M2.5 2.5C2.5 1.80859 1.94141 1.25 1.25 1.25C0.558594 1.25 0 1.80859 0 2.5V15.625C0 17.3516 1.39844 18.75 3.125 18.75H18.75C19.4414 18.75 20 18.1914 20 17.5C20 16.8086 19.4414 16.25 18.75 16.25H3.125C2.78125 16.25 2.5 15.9688 2.5 15.625V2.5ZM18.3828 5.88281C18.8711 5.39453 18.8711 4.60156 18.3828 4.11328C17.8945 3.625 17.1016 3.625 16.6133 4.11328L12.5 8.23047L10.2578 5.98828C9.76953 5.5 8.97656 5.5 8.48828 5.98828L4.11328 10.3633C3.625 10.8516 3.625 11.6445 4.11328 12.1328C4.60156 12.6211 5.39453 12.6211 5.88281 12.1328L9.375 8.64453L11.6172 10.8867C12.1055 11.375 12.8984 11.375 13.3867 10.8867L18.3867 5.88672L18.3828 5.88281Z" fill="#16A34A"/>
                              </svg>
                            </div>
                            <div style="margin-left: 15px;">
                                <div style="color: #2B2F36; font-size: 16px;">적립식펀드</div>
                                <div style="color: #6B7280; font-size: 14px;">가입일: 2023.01.15</div>
                            </div>
                            <div style="margin-left: 110px;">
                              <input type="radio" name="what" id="prod2" style="scale: calc(1.7); cursor: pointer;">
                            </div>
                          </div>
                          <div style="display: flex; margin-top: 20px;">
                            <div>현재 잔액</div>
                            <div style="margin-left: auto;">2850000원</div>
                          </div>
                          <div style="display: flex; margin-top: 15px;">
                            <div>연 이자율</div>
                            <div style="margin-left: auto;">3.2%</div>
                          </div>
                          </label>
                          <div style="text-align: center; margin-top: 20px;">
                            <div><a href="#" style="text-decoration: none; color: red;">자세히 보기</a></div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div style="background-color: white; width: 357px; border-radius: 16px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); border: 1px solid #E5E7EB;">
                  <div style="padding: 21px;">
                    <div>
                      <div style="display: flex;">
                        <div style="">
                          <label for="prod3" class="prod-select" style="display:block; cursor:pointer;">
                          <div style="display: flex; justify-content: center;">
                            <div style="display: flex; justify-content: center; align-items: center; border-radius: 8px; background-color: #e9f8fb; width: 48px; height: 48px;">
                              <svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M36 0C42.6274 0 48 5.37258 48 12V36C48 42.6274 42.6274 48 36 48H12C5.37258 48 0 42.6274 0 36V12C0 5.37258 5.37258 0 12 0H36Z" fill="#F3E8FF"/>
                                <path d="M36 0C42.6274 0 48 5.37258 48 12V36C48 42.6274 42.6274 48 36 48H12C5.37258 48 0 42.6274 0 36V12C0 5.37258 5.37258 0 12 0H36Z" stroke="#E5E7EB"/>
                                <g clip-path="url(#clip0_543_151)">
                                <path d="M34 17.625C34 18.3281 33.4414 18.9766 32.5 19.5C31.3633 20.1289 29.668 20.5742 27.7227 20.707C27.5781 20.6367 27.4336 20.5703 27.2812 20.5117C25.7422 19.8672 23.6953 19.5 21.5 19.5C21.1758 19.5 20.8594 19.5078 20.543 19.5234L20.5 19.5C19.5586 18.9766 19 18.3281 19 17.625C19 15.8984 22.3594 14.5 26.5 14.5C30.6406 14.5 34 15.8984 34 17.625ZM20.2773 20.793C20.6758 20.7656 21.0859 20.75 21.5 20.75C23.9297 20.75 26.0859 21.2305 27.457 21.9766C28.4258 22.5039 29 23.1602 29 23.875C29 24.0312 28.9727 24.1836 28.918 24.332C28.7383 24.8477 28.2539 25.3203 27.5508 25.7188C27.5469 25.7227 27.5391 25.7227 27.5352 25.7266C27.5234 25.7344 27.5117 25.7383 27.5 25.7461C26.1328 26.5039 23.9531 26.9961 21.5 26.9961C19.1719 26.9961 17.0898 26.5547 15.7109 25.8594C15.6367 25.8242 15.5664 25.7852 15.4961 25.7461C14.5586 25.2266 14 24.5781 14 23.875C14 22.5156 16.0859 21.3555 19 20.9297C19.4102 20.8711 19.8359 20.8242 20.2773 20.793ZM30.25 23.875C30.25 23.0195 29.8359 22.3164 29.3086 21.7891C30.4141 21.6172 31.4258 21.3438 32.2852 20.9883C32.9219 20.7227 33.5156 20.3945 34 19.9922V21.375C34 22.1289 33.3555 22.8242 32.2891 23.3633C31.7188 23.6523 31.0234 23.8984 30.2422 24.0859C30.2461 24.0156 30.25 23.9492 30.25 23.8789V23.875ZM29 27.625C29 28.3281 28.4414 28.9766 27.5 29.5C27.4297 29.5391 27.3594 29.5742 27.2852 29.6133C25.9102 30.3086 23.8281 30.75 21.5 30.75C19.0469 30.75 16.8672 30.2578 15.5 29.5C14.5586 28.9766 14 28.3281 14 27.625V26.2422C14.4883 26.6445 15.0781 26.9727 15.7148 27.2383C17.2578 27.8828 19.3047 28.25 21.5 28.25C23.6953 28.25 25.7422 27.8828 27.2852 27.2383C27.5898 27.1133 27.8828 26.9688 28.1602 26.8125C28.3984 26.6797 28.6211 26.5312 28.832 26.375C28.8906 26.332 28.9453 26.2852 29 26.2422V26.375V26.5977V27.625ZM30.25 27.625V26.375V25.3633C30.9922 25.1992 31.6758 24.9922 32.2852 24.7383C32.9219 24.4727 33.5156 24.1445 34 23.7422V25.125C34 25.5352 33.8047 25.9453 33.418 26.332C32.7812 26.9688 31.6602 27.4922 30.2422 27.832C30.2461 27.7656 30.25 27.6953 30.25 27.625ZM21.5 32C23.6953 32 25.7422 31.6328 27.2852 30.9883C27.9219 30.7227 28.5156 30.3945 29 29.9922V31.375C29 33.1016 25.6406 34.5 21.5 34.5C17.3594 34.5 14 33.1016 14 31.375V29.9922C14.4883 30.3945 15.0781 30.7227 15.7148 30.9883C17.2578 31.6328 19.3047 32 21.5 32Z" fill="#9333EA"/>
                                </g>
                                <defs>
                                <clipPath id="clip0_543_151">
                                <path d="M14 14.5H34V34.5H14V14.5Z" fill="white"/>
                                </clipPath>
                                </defs>
                              </svg>
                            </div>
                            <div style="margin-left: 15px;">
                                <div style="color: #2B2F36; font-size: 16px;">자유적금</div>
                                <div style="color: #6B7280; font-size: 14px;">만기일: 2025.12.30</div>
                            </div>
                            <div style="margin-left: 110px;">
                              <input type="radio" name="what" id="prod3" style="scale: calc(1.7); cursor: pointer;">
                            </div>
                          </div>
                          <div style="display: flex; margin-top: 20px;">
                            <div>현재 잔액</div>
                            <div style="margin-left: auto;">1200000원</div>
                          </div>
                          <div style="display: flex; margin-top: 15px;">
                            <div>연 이자율</div>
                            <div style="margin-left: auto;">2.8%</div>
                          </div>
                          </label>
                          <div style="text-align: center; margin-top: 20px;">
                            <div><a href="#" style="text-decoration: none; color: red;">자세히 보기</a></div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
            </div>
            </div>
          </div>
          <div style="margin-top:25px; padding:30px; box-sizing: border-box; background-color: #FEF2F2; width: 100%; border-radius: 16px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); border: 1px solid #FECACA;">
            <div style="display: flex;">
              <div style="margin-right: 15px; margin-top: 5px;">
                <svg width="20" height="20" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M7.99982 1C8.44357 1 8.85295 1.23437 9.07795 1.61875L15.8279 13.1187C16.0561 13.5062 16.0561 13.9844 15.8342 14.3719C15.6123 14.7594 15.1967 15 14.7498 15H1.24982C0.802948 15 0.387323 14.7594 0.165448 14.3719C-0.0564269 13.9844 -0.0533019 13.5031 0.171698 13.1187L6.9217 1.61875C7.1467 1.23437 7.55607 1 7.99982 1ZM7.99982 5C7.5842 5 7.24982 5.33437 7.24982 5.75V9.25C7.24982 9.66562 7.5842 10 7.99982 10C8.41545 10 8.74982 9.66562 8.74982 9.25V5.75C8.74982 5.33437 8.41545 5 7.99982 5ZM8.99982 12C8.99982 11.7348 8.89447 11.4804 8.70693 11.2929C8.51939 11.1054 8.26504 11 7.99982 11C7.73461 11 7.48025 11.1054 7.29272 11.2929C7.10518 11.4804 6.99982 11.7348 6.99982 12C6.99982 12.2652 7.10518 12.5196 7.29272 12.7071C7.48025 12.8946 7.73461 13 7.99982 13C8.26504 13 8.51939 12.8946 8.70693 12.7071C8.89447 12.5196 8.99982 12.2652 8.99982 12Z" fill="#D91A1A"/>
                </svg>
              </div>
              <div>
                <div style="font-size: 20px;">해지 전 확인사항</div>
                <div style="margin-top: 20px;"><span style="color:red;">•</span>&nbsp;&nbsp;만기 전 해지 시 약정 이자율보다 낮은 중도해지 이자율이 적용됩니다.</div>
                <div style="margin-top: 10px;"><span style="color:red;">•</span>&nbsp;&nbsp;펀드 상품의 경우 해지 수수료가 발생할 수 있습니다.</div>
                <div style="margin-top: 10px;"><span style="color:red;">•</span>&nbsp;&nbsp;해지 신청 후 취소가 불가능하오니 신중하게 결정해 주세요.</div>
                <div class="agree-option" style="display:flex; align-items:center; margin-top:20px; gap:8px;">
                  <input type="checkbox" id="agreeAll" style="width:20px; height:20px; margin-top: 6px;">
                  <label for="agreeAll" style="cursor:inherit;">위 내용을 모두 확인했습니다.</label>
                </div>
              </div>
            </div>
          </div>
          <div style="margin-top:25px; padding:30px; box-sizing: border-box; background-color: white; width: 100%;border-radius: 16px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); border: 1px solid #E5E7EB;">
            <div style="font-size:20px; color:#2B2F36;">본인 인증</div>
            <div style="font-size: 16px; color: #4B5563; margin-top: 20px;">인증 방법 선택</div>
            <div style="display: flex; margin-top: 20px;">
              <div style="display: flex; gap: 25px;">
                <div class="auth-option" style="padding-left:17px; display: flex; align-items: center; width: 538px; height: 60px; border:1px solid #D1D5DB; border-radius: 10px;">
                  <div style="margin-right: 15px;">
                    <input type="radio" name="auth" id="" style="transform: scale(1.7);">
                  </div>
                  <svg width="16" height="18" viewBox="0 0 14 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g clip-path="url(#clip0_543_217)">
                    <path d="M4.5 4.5V6H9.5V4.5C9.5 3.11875 8.38125 2 7 2C5.61875 2 4.5 3.11875 4.5 4.5ZM2.5 6V4.5C2.5 2.01562 4.51562 0 7 0C9.48438 0 11.5 2.01562 11.5 4.5V6H12C13.1031 6 14 6.89687 14 8V14C14 15.1031 13.1031 16 12 16H2C0.896875 16 0 15.1031 0 14V8C0 6.89687 0.896875 6 2 6H2.5Z" fill="#4B5563"/>
                    </g>
                    <defs>
                    <clipPath id="clip0_543_217">
                    <path d="M0 0H14V16H0V0Z" fill="white"/>
                    </clipPath>
                    </defs>
                  </svg>
                  <div style="margin-left: 8px;" style="color:#2B2F36; font-size: 18px;">계좌 비밀번호</div>
                </div>
                <div class="auth-option" style="padding-left:17px; display: flex; align-items: center; width: 538px; height: 60px; border:1px solid #D1D5DB; border-radius: 10px;">
                  <div style="margin-right: 15px;">
                    <input type="radio" name="auth" id="" style="transform: scale(1.7);">
                  </div>
                  <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g clip-path="url(#clip0_543_220)">
                    <path d="M1.5 8C1.5 4.40938 4.40938 1.5 8 1.5C9.97188 1.5 11.7375 2.37812 12.9312 3.76562C13.2 4.08125 13.675 4.11562 13.9875 3.84687C14.3 3.57812 14.3375 3.10313 14.0688 2.79063C12.6031 1.08125 10.4281 0 8 0C3.58125 0 0 3.58125 0 8V9.25C0 9.66562 0.334375 10 0.75 10C1.16562 10 1.5 9.66562 1.5 9.25V8ZM15.8281 6.34688C15.7437 5.94063 15.3438 5.68125 14.9406 5.76875C14.5375 5.85625 14.275 6.25313 14.3625 6.65625C14.4531 7.09062 14.5031 7.54063 14.5031 8.00313V9.25313C14.5031 9.66875 14.8375 10.0031 15.2531 10.0031C15.6687 10.0031 16.0031 9.66875 16.0031 9.25313V8C16.0031 7.43437 15.9438 6.88125 15.8313 6.34688H15.8281ZM8 2.5C7.40625 2.5 6.83125 2.59375 6.29688 2.76875C5.82188 2.925 5.7125 3.50938 6.0375 3.89062C6.25938 4.15 6.625 4.22812 6.95625 4.1375C7.2875 4.04688 7.6375 4 8 4C10.2094 4 12 5.79063 12 8V8.77812C12 9.56563 11.9531 10.35 11.8625 11.1313C11.8094 11.5875 12.1562 12 12.6187 12C12.9875 12 13.3031 11.7313 13.3469 11.3656C13.45 10.5094 13.5031 9.64688 13.5031 8.78125V8C13.5031 4.9625 11.0406 2.5 8.00313 2.5H8ZM4.70937 4.64687C4.425 4.31562 3.91875 4.29063 3.65 4.63438C2.92813 5.5625 2.5 6.73125 2.5 8V8.77812C2.5 9.53438 2.41875 10.2906 2.25625 11.025C2.15 11.5125 2.50312 12 3.00312 12C3.33125 12 3.625 11.7812 3.69688 11.4594C3.89688 10.5813 4 9.68437 4 8.77812V8C4 7.15 4.26562 6.3625 4.71562 5.71562C4.94062 5.39062 4.96562 4.94688 4.70937 4.64687ZM8 5C6.34375 5 5 6.34375 5 8V8.77812C5 9.9 4.85625 11.0125 4.56875 12.0938C4.45 12.5406 4.77812 13 5.24062 13C5.5375 13 5.8 12.8063 5.87813 12.5188C6.20625 11.3 6.375 10.0437 6.375 8.77812V8C6.375 7.10313 7.10313 6.375 8 6.375C8.89688 6.375 9.625 7.10313 9.625 8V8.77812C9.625 9.9125 9.51562 11.0406 9.3 12.15C9.21562 12.5844 9.54062 13 9.98125 13C10.3 13 10.575 12.7812 10.6375 12.4688C10.8781 11.2563 11 10.0219 11 8.77812V8C11 6.34375 9.65625 5 8 5ZM8.75 8C8.75 7.58437 8.41562 7.25 8 7.25C7.58437 7.25 7.25 7.58437 7.25 8V8.77812C7.25 10.65 6.90625 12.5063 6.23438 14.2531L6.05 14.7312C5.9 15.1187 6.09375 15.5531 6.48125 15.7C6.86875 15.8469 7.30312 15.6562 7.45 15.2688L7.63438 14.7906C8.37187 12.8719 8.75 10.8344 8.75 8.77812V8Z" fill="#4B5563"/>
                    </g>
                    <defs>
                    <clipPath id="clip0_543_220">
                    <path d="M0 0H16V16H0V0Z" fill="white"/>
                    </clipPath>
                    </defs>
                  </svg>
                  <div style="margin-left: 8px;" style="color:#2B2F36; font-size: 18px;">간편 인증</div>
                </div>
              </div>
          </div>
          <div style="font-size: 16px; color: #4B5563; margin-top: 20px;">비밀번호 입력</div>
          <div>
            <div class="pw-wrap">
              <input type="password" id="accountPw" class="pw-input" placeholder="계좌 비밀번호를 입력하세요" style="margin-top: -1px; box-sizing: border-box; outline:none; padding-left:15px; font-size: 16px; width: 100%; height: 50px; border:1px solid #D1D5DB; border-radius: 6px;">
              <!-- 주신 아이콘 버튼 그대로 사용, 대상은 위 input의 id -->
              <button class="eye-btn" data-target="accountPw" aria-label="비밀번호 보기/가리기">
                <!-- (아이콘 SVG 원문 그대로) -->
                <svg width="16" height="20" viewBox="0 0 16 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <g clip-path="url(#clip0_185_295)">
                    <path d="M7.8748 5.9375C6.09199 5.9375 4.62637 6.74688 3.50254 7.78867C2.44981 8.76758 1.72246 9.92969 1.35059 10.75C1.72246 11.5703 2.4498 12.7324 3.4998 13.7113C4.62637 14.7531 6.09199 15.5625 7.8748 15.5625C9.65762 15.5625 11.1232 14.7531 12.2471 13.7113C13.2998 12.7324 14.0271 11.5703 14.399 10.75C14.0271 9.92969 13.2998 8.76758 12.2498 7.78867C11.1232 6.74688 9.65762 5.9375 7.8748 5.9375ZM2.6084 6.82891C3.89629 5.63125 5.66543 4.625 7.8748 4.625C10.0842 4.625 11.8533 5.63125 13.1412 6.82891C14.4209 8.01836 15.2768 9.4375 15.6842 10.4137C15.7744 10.6297 15.7744 10.8703 15.6842 11.0863C15.2768 12.0625 14.4209 13.4844 13.1412 14.6711C11.8533 15.8687 10.0842 16.875 7.8748 16.875C5.66543 16.875 3.89629 15.8687 2.6084 14.6711C1.32871 13.4844 0.472852 12.0625 0.0681641 11.0863C-0.0220703 10.8703 -0.0220703 10.6297 0.0681641 10.4137C0.472852 9.4375 1.32871 8.01562 2.6084 6.82891ZM7.8748 12.9375C9.0834 12.9375 10.0623 11.9586 10.0623 10.75C10.0623 9.54141 9.0834 8.5625 7.8748 8.5625C7.85566 8.5625 7.83926 8.5625 7.82012 8.5625C7.85566 8.70195 7.8748 8.84961 7.8748 9C7.8748 9.96523 7.09004 10.75 6.1248 10.75C5.97441 10.75 5.82676 10.7309 5.6873 10.6953C5.6873 10.7145 5.6873 10.7309 5.6873 10.75C5.6873 11.9586 6.66621 12.9375 7.8748 12.9375ZM7.8748 7.25C8.80306 7.25 9.6933 7.61875 10.3497 8.27513C11.0061 8.9315 11.3748 9.82174 11.3748 10.75C11.3748 11.6783 11.0061 12.5685 10.3497 13.2249C9.6933 13.8813 8.80306 14.25 7.8748 14.25C6.94655 14.25 6.05631 13.8813 5.39993 13.2249C4.74355 12.5685 4.3748 11.6783 4.3748 10.75C4.3748 9.82174 4.74355 8.9315 5.39993 8.27513C6.05631 7.61875 6.94655 7.25 7.8748 7.25Z" fill="#9CA3AF"/>
                  </g>
                  <defs><clipPath id="clip0_185_295"><path d="M0 3.75H15.75V17.75H0V3.75Z" fill="white"/></clipPath></defs>
                </svg>
              </button>
            </div>
          </div>
          </div>
          <div style="margin-top:25px; padding:30px; box-sizing: border-box; background-color: white; width: 100%;border-radius: 16px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); border: 1px solid #E5E7EB;">
            <div style="font-size:20px; color:#2B2F36;">해지 신청 요약</div>
            <div style="font-size: 16px; color: #4B5563; margin-top: 25px;">
              <div style="display: flex;">
                <div style="margin-left: 7px;">선택 상품</div>
                <div style="margin-left: auto; margin-right: 10px;">정기예금</div>
              </div>
              <hr style="margin-top: 12px;">
            </div>
            <div style="font-size: 16px; color: #4B5563; margin-top: 25px;">
              <div style="display: flex;">
                <div style="margin-left: 7px;">해지 금액</div>
                <div style="margin-left: auto; margin-right: 10px;">10500000원</div>
              </div>
              <hr style="margin-top: 12px;">
            </div>
            <div style="font-size: 16px; color: #4B5563; margin-top: 25px;">
              <div style="display: flex;">
                <div style="margin-left: 7px;">수령 계좌</div>
                <div style="margin-left: auto; margin-right: 10px;">부산은행 123-456-789012</div>
              </div>
              <hr style="margin-top: 12px;">
            </div>
            <div style="font-size: 16px; color: #4B5563; margin-top: 25px;">
              <div style="display: flex;">
                <div style="margin-left: 7px;">처리 예정일</div>
                <div style="margin-left: auto; margin-right: 10px;">2024년 11월 6일</div>
              </div>
              <hr style="margin-top: 12px;">
            </div>
          </div>
      </div>
      <div style="display: flex; gap: 20px; margin-top: 25px;">
        <div>
          <button class="btn-pressable btn-sheen" style="box-sizing: border-box; width: 590px; height: 42px; border:none; border-radius: 8px; cursor: pointer; border:1px solid #D1D5DB; background-color: white;">취소</button>
        </div>
        <div>
          <button class="btn-register" id="btnFinal" style="width: 590px;">최종 해지 신청</button>
        </div>
      </div>
    </div>
    </main>

    <footer>
        <div id="footer"></div>
    </footer>
    <script>
    // header 불러오기
    fetch('/layouts/header.html')
        .then(response => response.text())
        .then(data => {
        document.getElementById('header').innerHTML = data;
        });
    </script>
    <div id="bnk-chatbot-container" style="position: fixed; right: 20px; bottom: 20px; z-index: 9999;">
    <div id="bnk-chatbot-slot"></div>
  </div>
  <script>
  /**
   * 외부 HTML을 불러와서:
   *  - <link rel="stylesheet">, <style>는 <head>로 옮기고
   *  - <script>는 실행되도록 새로 만들어 붙이고 (src/inline, module 모두 지원)
   *  - 나머지 DOM(예: <flowise-chatbot> / <flowise-embed>)은 mount에 삽입
   */
  async function importHtmlWithAssets(url, mountSelector) {
    const res = await fetch(url, { credentials: 'same-origin' });
    if (!res.ok) throw new Error(`Failed to load ${url}`);
    const html = await res.text();

    const parser = new DOMParser();
    const doc = parser.parseFromString(html, 'text/html');

    // 1) <link rel="stylesheet"> 들을 <head>로
    doc.querySelectorAll('link[rel="stylesheet"]').forEach(link => {
      // 중복 로드 방지
      const href = link.getAttribute('href');
      if (href && ![...document.head.querySelectorAll('link[rel="stylesheet"]')]
        .some(l => l.getAttribute('href') === href)) {
        document.head.appendChild(link.cloneNode(true));
      }
    });

    // 2) <style> 들을 <head>로
    doc.querySelectorAll('style').forEach(styleEl => {
      const clone = document.createElement('style');
      // CSS 텍스트 보존
      clone.textContent = styleEl.textContent;
      // (가능한 속성 복사)
      [...styleEl.attributes].forEach(a => clone.setAttribute(a.name, a.value));
      document.head.appendChild(clone);
    });

    // 3) 본문 콘텐츠를 mount에 붙임 (스크립트 제외)
    const mount = document.querySelector(mountSelector);
    // fragment 구성
    const frag = document.createDocumentFragment();
    [...doc.body.children].forEach(node => {
      if (node.tagName.toLowerCase() !== 'script') frag.appendChild(node.cloneNode(true));
    });
    mount.appendChild(frag);

    // 4) 스크립트 실행 (src/inline/module 지원, 순서 보장)
    const scripts = [...doc.querySelectorAll('script')];
    for (const oldScript of scripts) {
      const newScript = document.createElement('script');
      // type/module/defer 등 속성 복사
      [...oldScript.attributes].forEach(attr => newScript.setAttribute(attr.name, attr.value));
      if (oldScript.src) {
        // 네트워크 로드를 기다려 실행 순서 유지
        await new Promise((resolve, reject) => {
          newScript.onload = resolve;
          newScript.onerror = resolve;   // 실패해도 진행(브랜딩 제거 같은 선택 기능 보호)
          document.body.appendChild(newScript);
        });
      } else {
        // inline 코드 복사
        newScript.textContent = oldScript.textContent || '';
        document.body.appendChild(newScript);
      }
    }
  }

  // 실제 호출: 기존 chatbot.html(또는 chatbot_test.html) 경로로 바꿔도 됩니다.
  importHtmlWithAssets('/components/chatbot_test.html', '#bnk-chatbot-slot')
    .catch(err => console.error('[Chatbot load failed]', err));
  </script>
  <script>
    fetch('https://api.ipify.org?format=json')
      .then(res => res.json())
      .then(data => {
        document.getElementById('ip').textContent = `${data.ip}`;
      })
      .catch(err => {
        document.getElementById('ip').textContent = 'IP를 가져오지 못했습니다.';
        console.error(err);
      });
  </script>
    <script>
    // footer 불러오기
    fetch('/layouts/footer.html')
        .then(response => response.text())
        .then(data => {
        document.getElementById('footer').innerHTML = data;
        });
    </script>
    <script>
    // 요약 카드의 '계좌이체' 카드 클릭 시 모달 열기
    document.addEventListener('DOMContentLoaded', () => {
      const transferCard = document.getElementById('transfer-card'); // ← 방금 단 id
      if (transferCard) {
        transferCard.addEventListener('click', (e) => {
          e.preventDefault();          // 앵커 기본 동작 막기
          overlay.classList.add('show'); // 모달 보이기
          resetFlow();                 // 1단계로 초기화
        });
      }
    });
  </script>
    <script>
        window.addEventListener('DOMContentLoaded', () => {
        const BADGE = {
            'Royal VIP': { color:'white', bg:'#3c4249', w:57, h:22 },
            'Gold VIP'  : { color:'#B8860B', bg:'#FFF6DC', w:46, h:24 },
            'Silver VIP': { color:'#6B7280', bg:'#F3F4F6', w:46, h:24 },
            'Green VIP' : { color:'#15803D', bg:'#DCFCE7', w:46, h:24 },
            'Family'    : { color:'#2563EB', bg:'#DBEAFE', w:46, h:24 },
        };

        document.querySelectorAll('.status-badge').forEach(el => {
            const key = el.textContent.trim();
            const s = BADGE[key];
            if (!s) return;

            Object.assign(el.style, {
            display: 'inline-flex',
            justifyContent: 'center',
            alignItems: 'center',
            padding: '0 8px',
            fontSize: '12px',
            fontWeight: '500',
            lineHeight: '1',
            color: s.color,
            backgroundColor: s.bg,
            borderRadius: '20px',
            height: s.h + 'px',
            minWidth: s.w + 'px',
            boxSizing: 'border-box',
            });
        });
        });
    </script>
    <script>
        // ---- 마스킹 규칙 ----
        function maskCustomerNo(raw) {
            // 숫자만 추출 후 4-4-나머지 형태로 다시 묶고, 앞 8자리는 ****-****
            const digits = raw.replace(/\D/g, "");
            const a = digits.slice(0, 4);
            const b = digits.slice(4, 8);
            const rest = digits.slice(8); // 나머지
            const last = rest ? rest : "";
            return `****-****-${last}`;
        }

        function maskEmail(raw) {
            const [local, domain = ""] = raw.split("@");
            const shown = (local || "").slice(0, 3);
            const maskedLen = Math.max((local || "").length - 3, 0);
            const masked = "*".repeat(maskedLen);
            return `${shown}${masked}${domain ? "@" + domain : ""}`;
        }

        function normalizePhoneDigits(raw) {
            // 숫자만 추출 후 한국형 기본 포맷(3-4-4 or 2-3-4 등)으로 리턴
            const d = raw.replace(/\D/g, "");
            // 02로 시작(서울) 케이스
            if (d.startsWith("02")) {
            const a = d.slice(0, 2);
            const b = d.length === 9 ? d.slice(2, 5) : d.slice(2, 6);
            const c = d.slice(2 + b.length);
            return [a, b, c];
            }
            // 그 외(010, 011 등)
            const a = d.slice(0, 3);
            const b = d.length >= 10 ? d.slice(3, d.length - 4) : d.slice(3, d.length - 4); // 중간 전부
            const c = d.slice(-4);
            return [a, b, c];
        }

        function formatPhone(groups) {
            return groups.filter(Boolean).join("-");
        }

        function maskPhone(raw) {
            const groups = normalizePhoneDigits(raw);
            // 가운데 그룹만 **** 고정
            if (groups.length >= 2) groups[1] = "****";
            return formatPhone(groups);
        }

        // ---- 렌더링 & 토글 ----
        function renderMasked(el) {
            const type = el.dataset.type;
            const raw = el.dataset.raw || "";
            let masked = raw;
            if (type === "custno") masked = maskCustomerNo(raw);
            else if (type === "email") masked = maskEmail(raw);
            else if (type === "mobile") masked = maskPhone(raw);
            el.textContent = masked;
            el.dataset.state = "masked";
        }

        function renderRaw(el) {
            el.textContent = el.dataset.raw || "";
            el.dataset.state = "visible";
        }

        function toggleVisibility(targetId) {
            const el = document.getElementById(targetId);
            if (!el) return;
            if (el.dataset.state === "visible") renderMasked(el);
            else renderRaw(el);
        }

        // 초기 마스킹
        document.querySelectorAll(".maskable").forEach(renderMasked);

        // 눈 아이콘 클릭 핸들러
        document.querySelectorAll(".eye-btn").forEach(btn => {
            btn.addEventListener("click", () => toggleVisibility(btn.dataset.target));
            // 키보드 접근성(Enter/Space)
            btn.addEventListener("keydown", (e) => {
            if (e.key === "Enter" || e.key === " ") {
                e.preventDefault();
                toggleVisibility(btn.dataset.target);
            }
            });
        });
    </script>
    <script>
  // "보유계좌 목록" 테이블의 5번째 열(잔액)만 3자리 콤마 적용
  document.addEventListener('DOMContentLoaded', function () {
    const table = document.getElementById('accounts-table');
    if (!table) return;

    // 헤더를 제외한 모든 행의 5번째 셀(td:nth-child(5)) 대상
    table.querySelectorAll('tr td:nth-child(5)').forEach(td => {
      const raw = (td.textContent || '').trim();
      if (/^\d+$/.test(raw)) { // 숫자만 있는 경우에만 포맷
        td.textContent = Number(raw).toLocaleString('ko-KR');
      }
    });
  });
</script>
<script>
  // 요약 카드(#summary-cards) 안의 텍스트만 가공
  document.addEventListener('DOMContentLoaded', () => {
    const root = document.getElementById('summary-cards');
    if (!root) return;

    // 텍스트 노드만 순회
    const walker = document.createTreeWalker(root, NodeFilter.SHOW_TEXT, {
      acceptNode(node) {
        const t = node.nodeValue;
        return (!t || !t.trim()) ? NodeFilter.FILTER_REJECT : NodeFilter.FILTER_ACCEPT;
      }
    });

    const nodes = [];
    for (let n = walker.nextNode(); n; n = walker.nextNode()) nodes.push(n);

    nodes.forEach(node => {
      let text = node.nodeValue;

      // 1) 이름 마스킹: '김철수님/님께' → '김○○님/님께'
      text = text.replace(/([가-힣])([가-힣]{1,3})(?=님(?:께)?)/g,
        (_, s, rest) => s + '○'.repeat(rest.length)
      );

      // 2) 금액 3자리 콤마: '16480000원', '3000000 원' 등
      // - '원' 앞의 모든 공백(일반/개행/NBSP 등)을 허용
      // - 이미 콤마가 있어도 정상화
      text = text.replace(/(\d[\d,]{3,})(?=(?:\s|\u00A0)*원)/g, (m) => {
        const num = m.replace(/,/g, '');
        return Number(num).toLocaleString('ko-KR');
      });

      node.nodeValue = text;
    });
  });
</script>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('.amount').forEach(amountEl => {
      // 같은 행(부모) 안의 아이콘 자리 찾기
      const row = amountEl.parentElement;
      const iconEl = row ? row.querySelector('.icon') : null;

      // 숫자 파싱
      const raw = amountEl.textContent.replace(/원/g, '').replace(/,/g, '').trim();
      const num = Number(raw);
      if (!Number.isFinite(num)) return;

      // 표시용 문자열(+/- + 콤마)
      const fmt = Math.abs(num).toLocaleString('ko-KR');
      if (num > 0) {
        amountEl.textContent = `+${fmt}원`;
        if (iconEl) setIcon(iconEl, 'plus');
      } else if (num < 0) {
        amountEl.textContent = `-${fmt}원`;
        if (iconEl) setIcon(iconEl, 'minus');
      } else {
        amountEl.textContent = `0원`;
        if (iconEl) iconEl.innerHTML = ''; // 0원은 아이콘 없음(원하면 바꿔도 됨)
      }
    });

    // 아이콘 세팅: 숨겨둔 SVG를 복제해 id 제거 후 표시
    function setIcon(holder, type) {
      const tpl = document.getElementById(type === 'plus' ? 'icon-plus' : 'icon-minus');
      if (!tpl) return;
      const clone = tpl.cloneNode(true);
      clone.removeAttribute('id');
      clone.style.display = ''; // 보이게
      holder.replaceChildren(clone);
    }
  });
</script>
<script>
  // 숫자→콤마 포맷터 (부호 유지)
  function formatNumberKR(raw) {
    const sign = raw.startsWith('+') || raw.startsWith('-') ? raw[0] : '';
    const digits = raw.replace(/[^\d]/g, '');
    return sign + Number(digits || '0').toLocaleString('ko-KR');
  }

  // .money-scope 내부에서만 "…원"으로 끝나는 숫자에 콤마 적용
  document.addEventListener('DOMContentLoaded', () => {
    // 여러 개의 .money-scope 선택
    const scopes = document.querySelectorAll('.money-scope');
    if (!scopes.length) return;

    const skip = new Set(['SCRIPT', 'STYLE', 'TEXTAREA', 'CODE']);

    // 각 영역별로 처리
    scopes.forEach(scope => {
      const walker = document.createTreeWalker(scope, NodeFilter.SHOW_TEXT, {
        acceptNode(node) {
          if (skip.has(node.parentNode?.nodeName)) return NodeFilter.FILTER_REJECT;
          const t = node.nodeValue;
          // 숫자 있고 '원'이 있을 때만 후보
          return (/\d/.test(t) && /원/.test(t))
            ? NodeFilter.FILTER_ACCEPT
            : NodeFilter.FILTER_REJECT;
        }
      });

      const targets = [];
      for (let n = walker.nextNode(); n; n = walker.nextNode()) targets.push(n);

      targets.forEach(node => {
        node.nodeValue = node.nodeValue.replace(
          /([+\-]?\d[\d,]*)(?=(?:\s|\u00A0)*원)/g, // '원' 앞 숫자(콤마/부호 포함)
          m => formatNumberKR(m)
        );
      });
    });
  });
</script>
<script>
document.addEventListener('DOMContentLoaded', () => {
  const panel = document.querySelector('.money-scope > div[style*="background-color: white"][style*="padding:30px"]');
  const sortSelect = document.getElementById('product-sort');
  if (!panel || !sortSelect) return;

  // 래핑 컨테이너(2열 고정)
  const rows = panel.querySelectorAll(':scope > div[style*="display: flex"][style*="gap: 25px"]');
  const grid = document.createElement('div');
  grid.className = 'products-grid';
  Object.assign(grid.style, {
    display: 'flex',
    flexWrap: 'wrap',
    gap: '25px',
    justifyContent: 'space-between' // 좌우 꽉 채우기
  });

  const headerRow = panel.querySelector(':scope > div[style*="font-size: 18px"]');
  headerRow.after(grid);

  // 카드 이동 + 폭을 2열 비율로 강제
  rows.forEach(r => {
    r.querySelectorAll('.menu-card').forEach(card => {
      // 폭을 고정값(555px)에서 2열 비율로 전환
      card.style.width = 'calc(50% - 12.5px)'; // 12.5px = gap/2
      card.style.boxSizing = 'border-box';     // 보더 포함 계산
      grid.appendChild(card);
    });
    r.remove();
  });

  // --- 이하 정렬 로직 그대로 ---
  function extractBalance(card) {
    const m = card.textContent.match(/([+-]?\d[\d,]*)\s*원/);
    return m ? Number(m[1].replace(/,/g, '')) : 0;
  }
  function extractName(card) {
    const nameEl = card.querySelector('div[style*="font-size: 16px"][style*="color: #2B2F36"]');
    return (nameEl?.textContent || '').trim();
  }
  function extractJoinDate(card) {
    const m = card.textContent.match(/가입일:\s*(\d{4})\.(\d{2})\.(\d{2})/);
    return m ? new Date(`${m[1]}-${m[2]}-${m[3]}T00:00:00`).getTime() : 0;
  }

  const cards = Array.from(grid.querySelectorAll('.menu-card'));
  cards.forEach((card, idx) => {
    card.dataset.index = String(idx);
    card.dataset.balance = String(extractBalance(card));
    card.dataset.name = extractName(card);
    card.dataset.joinTs = String(extractJoinDate(card));
  });

  function applySort(type) {
    const arr = Array.from(grid.querySelectorAll('.menu-card'));
    arr.sort((a, b) => {
      switch (type) {
        case 'high': return b.dataset.balance - a.dataset.balance;
        case 'low' : return a.dataset.balance - b.dataset.balance;
        case 'name': return (a.dataset.name||'').localeCompare(b.dataset.name||'', 'ko');
        case 'new' : return b.dataset.joinTs - a.dataset.joinTs;
        default    : return a.dataset.index - b.dataset.index;
      }
    });
    arr.forEach(card => grid.appendChild(card));
  }

  applySort(sortSelect.value || 'all');
  sortSelect.addEventListener('change', e => applySort(e.target.value));
});
</script>
<script>
document.addEventListener('DOMContentLoaded', () => {
  const panel = document.getElementById('aiReco');
  if (!panel) return;

  // X 버튼
  const closeBtn = panel.querySelector('[data-close]');
  if (!closeBtn) return;

  // 공간 고정이 더 확실하길 원하면 최초 높이를 최소높이로 잠가도 됨 (선택)
  // const h = panel.getBoundingClientRect().height;
  // panel.style.minHeight = h + 'px';

  const fadeOut = () => {
    panel.classList.add('is-fading');   // opacity만 0으로
    panel.setAttribute('aria-hidden', 'true');
    // transitionend 콜백에서 아무 것도 하지 마세요! (공간 유지 위해)
  };

  closeBtn.style.cursor = 'pointer';
  closeBtn.setAttribute('role', 'button');
  closeBtn.setAttribute('tabindex', '0');
  closeBtn.addEventListener('click', fadeOut);
  closeBtn.addEventListener('keydown', (e) => {
    if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); fadeOut(); }
  });
});
</script>
<!-- ① head에 추가: 모달/폼 스타일 -->
<style>
  :root{
    --bnk-red:#D91A1A;
    --bnk-red-2:#F03A3A;
    --ink:#111827;
    --sub:#4B5563;
    --line:#E5E7EB;
    --panel:#FFFFFF;
    --bg:#F6F6F8;
  }
  /* 오버레이 */
  .bnk-transfer__overlay{
    position:fixed; inset:0; background:rgba(17,24,39,.55);
    display:none; align-items:flex-end; justify-content:center; z-index:9990;
  }
  /* 컨테이너(바텀시트형) */
  .bnk-transfer__sheet{
    width:720px; max-width:100%; background:#111827; color:#fff;
    border-top-left-radius:16px; border-top-right-radius:16px;
    box-shadow:0 -12px 40px rgba(0,0,0,.35); overflow:hidden;
    /* BNK 느낌 살리기: 상단 바에 레드 그라데이션 */
    position:relative;
  }
  .bnk-transfer__topbar{
    height:6px; background:linear-gradient(90deg,var(--bnk-red-2),var(--bnk-red));
  }
  .bnk-transfer__body{ padding:28px 24px 20px; }
  .bnk-transfer__title{ font-size:24px; font-weight:800; letter-spacing:-.3px; }
  .bnk-transfer__subtitle{ margin-top:8px; color:#cbd5e1; font-size:14px; }

  /* 입력 카드(다크 안쪽 화이트 입력 UI로 토스 느낌) */
  .bnk-inputcard{
    background:#0f172a; border:1px solid #1f2937; border-radius:12px;
    padding:18px; margin-top:18px;
  }
  .bnk-label{ color:#9CA3AF; font-size:13px; margin-bottom:6px; }
  .bnk-field{
    display:flex; align-items:center; gap:10px;
    background:#111827; border:1px solid #374151; border-radius:10px;
    padding:14px 12px;
  }
  .bnk-field input, .bnk-field select{
    background:transparent; border:none; outline:none; color:#fff; width:100%;
    font-size:18px;
  }
  .bnk-help{ margin-top:8px; color:#94a3b8; font-size:12px; }
  .bnk-banktag{
    padding:6px 10px; border-radius:999px; background:#0b1220; border:1px solid #334155;
    font-size:12px; color:#cbd5e1;
  }

  /* 액션 바 */
  .bnk-actions{ display:flex; gap:10px; margin-top:20px; }
  .bnk-btn{
    flex:1; height:48px; border:none; border-radius:10px; cursor:pointer;
    font-weight:700; font-size:16px; transition:.15s ease; 
  }
  .bnk-btn--ghost{ background:#0b1220; color:#e5e7eb; border:1px solid #334155; }
  .bnk-btn--primary{
    background:linear-gradient(180deg,var(--bnk-red-2),var(--bnk-red));
    color:#fff; box-shadow:0 6px 14px -10px rgba(217,26,26,.45);
  }
  .bnk-btn:disabled{ opacity:.45; cursor:not-allowed; }

  /* 진행 인디케이터 */
  .bnk-steps{ display:flex; gap:6px; align-items:center; margin-top:6px;}
  .bnk-dot{ width:6px;height:6px;border-radius:999px;background:#334155; }
  .bnk-dot.active{ background:#fda4a4; }

  /* 확인 단계 큰 타이포 */
  .bnk-confirm{
    text-align:center; padding:22px 12px 10px;
    font-size:28px; line-height:1.35; font-weight:800;
  }
  .bnk-kv{ display:flex; justify-content:space-between; color:#cbd5e1; font-size:14px; margin:8px 0;}
  .bnk-divider{ height:1px; background:#1f2937; margin:14px 0; }

  /* 상단 닫기 버튼 */
  .bnk-close{
    position:absolute; right:12px; top:12px; width:36px;height:36px; border-radius:10px;
    display:grid; place-items:center; background:#0b1220; border:1px solid #334155; cursor:pointer;
  }

  /* 접근성 & 애니메이션 */
  .bnk-transfer__overlay.show{ display:flex; }
  .bnk-transfer__sheet{ transform:translateY(8%); opacity:0; transition:.18s ease; }
  .bnk-transfer__overlay.show .bnk-transfer__sheet{ transform:translateY(0); opacity:1; }
  @media (max-width: 640px){
    .bnk-transfer__sheet{ border-radius:14px 14px 0 0; }
  }

  /* (옵션) 에러 텍스트 */
  .bnk-error{ color:#fecaca; font-size:12px; margin-top:6px; display:none;}
  .bnk-error.show{ display:block; }
  /* 드롭다운 내 option 글자색을 강제로 어둡게 */
  .bnk-field select option,
  .bnk-field select optgroup {
    color: #111827;  /* 검정 */
  }

  /* (선택) 일부 UA에서 배경도 설정하고 싶다면 — 지원 안 하는 브라우저도 있음 */
  .bnk-field select option {
    background: #ffffff; /* 기본 흰 배경 */
  }
  /* 오버레이: 페이드 인/아웃 */
  .bnk-transfer__overlay{
    position:fixed; inset:0; 
    background:rgba(17,24,39,.55);
    display:flex; align-items:flex-end; justify-content:center;
    z-index:9990;
    opacity:0; visibility:hidden;
    transition: opacity .28s ease;
  }

  .bnk-transfer__overlay.show{
    opacity:1; visibility:visible;
  }

  /* 시트: 아래(화면 밖)에서 위로 슬라이드 인 */
  .bnk-transfer__sheet{
    width:720px; max-width:100%;
    background:#111827; color:#fff;
    border-top-left-radius:16px; border-top-right-radius:16px;
    box-shadow:0 -12px 40px rgba(0,0,0,.35); overflow:hidden;
    position:relative;

    transform: translateY(100%); /* 처음엔 화면 아래 */
    opacity:0;
    transition:
      transform 1s cubic-bezier(.22,.61,.36,1),
      opacity .24s ease;
    will-change: transform, opacity;
  }

  .bnk-transfer__overlay.show .bnk-transfer__sheet{
    transform: translateY(0);
    opacity:1;
  }

  /* 모션 최소화 사용자 배려 */
  @media (prefers-reduced-motion: reduce){
    .bnk-transfer__overlay{ transition:none; }
    .bnk-transfer__sheet{ transition:none; transform:none; opacity:1; }
  }
  .bnk-transfer__overlay {
    background: rgba(17, 24, 39, 0.35);
  }

  .bnk-transfer__sheet {
    -webkit-font-smoothing: antialiased;
    text-rendering: optimizeLegibility;
  }
  /* 1) 배경 어둠은 유지하되 흐림감 제거 */
  .bnk-transfer__overlay{
    background: rgba(0,0,0,.28) !important;   /* 살짝 더 투명 → 내부 요소가 또렷 */
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
  }

  /* 2) 패널/텍스트 렌더링 선명도 ↑ + 과한 그림자 ↓ */
  .bnk-transfer__sheet{
    -webkit-font-smoothing: antialiased;  /* 다크 배경에서 글자 경계 선명 */
    text-rendering: optimizeLegibility;
    box-shadow: 0 -8px 24px rgba(0,0,0,.32); /* 번짐 줄인 샤도우 */
  }

  /* 3) 카드/입력 영역 대비 강화(배경 조금 더 밝고, 테두리 선명) */
  .bnk-inputcard{
    background:#0c1220 !important;
    border-color:#2b3340 !important;
  }
  .bnk-field{
    background:#0e1524 !important;
    border-color:#3a4354 !important;
  }
  .bnk-label{ color:#d1d5db !important; }
  .bnk-help{ color:#a9b4c4 !important; }

  /* 4) placeholder도 흐리게 보이지 않게 불투명도 고정 */
  .bnk-field input::placeholder,
  .bnk-field select::placeholder{
    color:#9aa3b2; opacity:1;
  }

  /* 5) 버튼 그림자 살짝 축소해 가장자리 번짐 최소화 */
  .bnk-btn--primary{
    box-shadow: 0 6px 14px -12px rgba(217,26,26,.45);
  }
  
  .auth-option { cursor: pointer; }
  .auth-option * { cursor: inherit; }
</style>

<!-- ③ main 끝나기 직전(</main> 위) 모달 HTML 추가 -->
<div class="bnk-transfer__overlay" id="bnkTransfer">
  <div class="bnk-transfer__sheet" role="dialog" aria-modal="true" aria-labelledby="bnkTransferTitle">
    <div class="bnk-transfer__topbar"></div>
    <button class="bnk-close" id="bnkClose" aria-label="닫기">
      <svg width="16" height="16" viewBox="0 0 20 20" fill="none" aria-hidden="true" xmlns="http://www.w3.org/2000/svg">
        <path d="M5 5l10 10M15 5L5 15" stroke="#94a3b8" stroke-width="2" stroke-linecap="round"/>
      </svg>
    </button>

    <div class="bnk-transfer__body">
      <div class="bnk-steps" aria-hidden="true">
        <span class="bnk-dot active" id="dot1"></span>
        <span class="bnk-dot" id="dot2"></span>
        <span class="bnk-dot" id="dot3"></span>
      </div>
      <div class="bnk-transfer__title" id="bnkTransferTitle">어떤 계좌로 보낼까요?</div>
      <div class="bnk-transfer__subtitle" id="bnkSubtitle">계좌번호를 입력하면 은행을 찾아드릴게요.</div>

      <!-- Step 1: 수취계좌 -->
      <section class="bnk-inputcard" id="step1">
        <!-- (추가) 수취인 이름 -->
        <div class="bnk-label" style="margin-top:14px;">수취인 이름 (선택)</div>
        <div class="bnk-field">
          <input id="recvName" autocomplete="off" placeholder="예: 김민수" />
        </div>
        <div class="bnk-help" style="margin-bottom: 10px;">입력하시면 확인 단계에 표시됩니다. 작성하지 않으면 수취인으로 표기됩니다.</div>
        <div class="bnk-label">계좌번호 입력</div>
        <div class="bnk-field">
          <input id="recvAccount" inputmode="numeric" autocomplete="off" placeholder="하이픈 없이 숫자만" />
          <span class="bnk-banktag" id="bankBadge" style="width: 70px; display: flex; justify-content: center;">은행 선택</span>
        </div>
        <div class="bnk-help">예: 0102596894009 → NH농협 자동 인식</div>
        <div class="bnk-error" id="accErr">유효한 계좌번호를 입력해 주세요.</div>

        <div class="bnk-label" style="margin-top:14px;">은행 선택</div>
        <div class="bnk-field">
          <select id="bankSelect" aria-label="은행 선택">
            <option value="">자동 선택(권장)</option>
            <option>NH농협</option>
            <option>KB국민</option>
            <option>신한</option>
            <option>우리</option>
            <option>IBK기업</option>
            <option>하나</option>
            <option>BNK부산</option>
          </select>
        </div>
      </section>

      <!-- Step 2: 금액 -->
      <section class="bnk-inputcard" id="step2" style="display:none;">
        <div class="bnk-label">얼마나 보낼까요?</div>
        <div class="bnk-field">
          <input id="amount" inputmode="numeric" placeholder="0" />
          <span style="color:#cbd5e1;font-size:18px;">원</span>
        </div>
        <div class="bnk-help">최대 · 2,000,000원 입력 (예시) · 출금계좌 잔액 5,193,021원</div>
        <div class="bnk-error" id="amtErr">한도를 초과했거나 금액 형식이 올바르지 않습니다.</div>
      </section>

      <!-- Step 3: 확인 -->
      <section class="bnk-inputcard" id="step3" style="display:none;">
        <div class="bnk-confirm">
          <span id="confirmName" style="color:#60a5fa;">수취인</span>님에게<br/>
          <span id="confirmAmt">0원</span>을 보낼까요?
        </div>
        <div class="bnk-divider"></div>
        <div class="bnk-kv"><span>출금 계좌</span><strong>내 자립예탁금 계좌</strong></div>
        <div class="bnk-kv"><span>입금 은행/계좌</span><strong id="confirmBank">-</strong></div>
        <div class="bnk-kv"><span>수수료</span><strong>평생 수수료 무료</strong></div>
      </section>

      <!-- 액션버튼 -->
      <div class="bnk-actions">
        <button class="bnk-btn bnk-btn--ghost" id="btnPrev">이전</button>
        <button class="bnk-btn bnk-btn--primary" id="btnNext">다음</button>
      </div>
    </div>
  </div>
</div>

<!-- ④ body 맨 아래 JS: 열기/닫기 + 단계 진행 + 포맷팅/검증 -->
<script>
  // 열기/닫기
  const openBtn = document.getElementById('quick-transfer-card');
  const overlay = document.getElementById('bnkTransfer');
  const closeBtn = document.getElementById('bnkClose');
  openBtn?.addEventListener('click', () => { overlay.classList.add('show'); resetFlow(); });
  function closeOverlaySmooth() {
  const sheet = overlay.querySelector('.bnk-transfer__sheet');
  if (!sheet) return;

  // 닫히는 애니메이션: translateY(100%)
  sheet.style.transform = 'translateY(100%)';
  sheet.style.opacity = '0';
  overlay.style.opacity = '0';

  // 애니메이션 종료 후 완전히 숨김 처리
  setTimeout(() => {
    overlay.classList.remove('show');
    sheet.style.transform = '';
    sheet.style.opacity = '';
    overlay.style.opacity = '';
  }, 400); // transition 시간과 동일
}

// 닫기 버튼 / 오버레이 클릭 시
closeBtn.addEventListener('click', closeOverlaySmooth);
overlay.addEventListener('click', (e) => {
  if (e.target === overlay) closeOverlaySmooth();
});

  // 단계 요소
  const steps = [document.getElementById('step1'), document.getElementById('step2'), document.getElementById('step3')];
  const dots = [document.getElementById('dot1'), document.getElementById('dot2'), document.getElementById('dot3')];
  const title = document.querySelector('.bnk-transfer__title');
  const subtitle = document.getElementById('bnkSubtitle');
  const btnPrev = document.getElementById('btnPrev');
  const btnNext = document.getElementById('btnNext');

  // 입력 요소
  const recvAccount = document.getElementById('recvAccount');
  const bankBadge = document.getElementById('bankBadge');
  const bankSelect = document.getElementById('bankSelect');
  const accErr = document.getElementById('accErr');

  const recvNameEl  = document.getElementById('recvName');
  const amount = document.getElementById('amount');
  const amtErr = document.getElementById('amtErr');

  const confirmName = document.getElementById('confirmName');
  const confirmAmt = document.getElementById('confirmAmt');
  const confirmBank = document.getElementById('confirmBank');

  let step = 0;

  function resetFlow(){
    step = 0;
    steps.forEach((s,i)=> s.style.display = i===0 ? 'block':'none');
    dots.forEach((d,i)=> d.classList.toggle('active', i===0));
    title.textContent = '어떤 계좌로 보낼까요?';
    subtitle.textContent = '계좌번호를 입력해주세요.';
    btnPrev.textContent = '닫기';
    btnNext.textContent = '다음';
    recvNameEl.value = '';
    recvAccount.value = '';
    bankSelect.value = '';
    bankBadge.textContent = '은행 선택';
    accErr.classList.remove('show');
    amount.value = '';
    amtErr.classList.remove('show');
    confirmName.textContent = '수취인';
    confirmAmt.textContent = '0원';
    confirmBank.textContent = '-';
  }

  // 간단 자동 은행 인식(데모): 앞자리 규칙 예시
  function detectBank(acct){
    if(/^010/.test(acct)) return 'NH농협';
    if(/^101/.test(acct)) return 'BNK부산';
    if(/^004/.test(acct)) return 'KB국민';
    return '';
  }
  // ① 계좌 입력 시: '자동 선택(권장)' 상태일 때만 자동 인식으로 배지 업데이트
  recvAccount.addEventListener('input', ()=>{
    recvAccount.value = recvAccount.value.replace(/\D/g,'');
    const auto = detectBank(recvAccount.value);

    // 드롭다운이 비어있을 때(자동 선택)만 배지에 자동 인식 결과 반영
    if (!bankSelect.value) {
      bankBadge.textContent = auto || '은행 선택';
    }

    // 자동 인식이 되었고 드롭다운도 비어있으면 드롭다운 값도 맞춰줌(편의)
    if (auto && !bankSelect.value) {
      bankSelect.value = auto;
    }
  });

  // ② 드롭다운 변경 시: 배지를 즉시 선택한 은행으로 동기화
  bankSelect.addEventListener('change', () => {
    const v = (bankSelect.value || '').trim();

    if (v) {
      // 사용자가 직접 고른 은행 → 배지에 그대로 표시
      bankBadge.textContent = v;
    } else {
      // '자동 선택(권장)'으로 되돌리면 자동 인식(또는 기본 문구)로 복원
      const auto = detectBank(recvAccount.value);
      bankBadge.textContent = auto || '은행 선택';
    }
  });

  // 금액 포맷
  function formatWon(v){
    if(!v) return '0원';
    return parseInt(v,10).toLocaleString('ko-KR')+'원';
  }
  amount.addEventListener('input', ()=>{
    amount.value = amount.value.replace(/\D/g,'');
  });

  // 버튼 동작
  btnPrev.addEventListener('click', ()=>{
    if(step===0){ overlay.classList.remove('show'); return; }
    step--;
    updateStepUI();
  });

  btnNext.addEventListener('click', ()=>{
    if(step===0){
      // 계좌 검증
      const acctOk = recvAccount.value.length >= 10;
      if(!acctOk){ accErr.classList.add('show'); return; }
      accErr.classList.remove('show');
      step=1;
      updateStepUI();
    }else if(step===1){
      const won = parseInt(amount.value||'0',10);
      const limit = 2000000; // 데모 한도
      if(!(won>0) || won>limit){ amtErr.classList.add('show'); return; }
      amtErr.classList.remove('show');
      // 확인 데이터 채우기(수취인 이름은 데모로 계좌 끝4자리 사용)
      const name = (recvNameEl.value || '').trim() || '수취인';
      confirmName.textContent = name;
      confirmAmt.textContent = formatWon(won);
      confirmBank.textContent = `${bankSelect.value||bankBadge.textContent||'-'} ${recvAccount.value}`;
      step=2;
      updateStepUI(true);
      btnNext.textContent = '보내기';
    }else{
      // 실제 송금 API가 없으므로 데모 완료 처리
      btnNext.disabled = true;
      btnNext.textContent = '처리 중...';
      setTimeout(()=>{
        btnNext.disabled = false;
        overlay.classList.remove('show');
        alert('이체가 완료되었습니다.');
      },700);
    }
  });

  function updateStepUI(final=false){
    steps.forEach((s,i)=> s.style.display = i===step ? 'block':'none');
    dots.forEach((d,i)=> d.classList.toggle('active', i===step));
    if(step===0){
      title.textContent = '어떤 계좌로 보낼까요?';
      subtitle.textContent = '계좌번호를 입력하면 은행을 찾아드릴게요.';
      btnPrev.textContent = '닫기';
      btnNext.textContent = '다음';
    }
    if(step===1){
      title.textContent = '얼마나 보낼까요?';
      subtitle.textContent = '최대 한도 내에서 금액을 입력해 주세요.';
      btnPrev.textContent = '이전';
      btnNext.textContent = '다음';
      amount.focus();
    }
    if(step===2){
      title.textContent = '';
      subtitle.textContent = '';
      btnPrev.textContent = '이전';
      btnNext.textContent = final ? '보내기' : '다음';
    }
  }
  document.addEventListener('DOMContentLoaded', () => {
  document.querySelectorAll('.eye-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const id = btn.dataset.target;
      const el = document.getElementById(id);
      if (!el) return;

      // input(password/text)이면 타입 전환
      if (el.tagName.toLowerCase() === 'input' &&
          (el.type === 'password' || el.type === 'text')) {
        const show = el.type === 'password';
        el.type = show ? 'text' : 'password';
        btn.classList.toggle('is-on', show);
        btn.setAttribute('aria-pressed', String(show));
        // 커서 위치 보존 (iOS 등 대응)
        el.focus(); el.setSelectionRange(el.value.length, el.value.length);
      } else {
        // 그 외(마스킹 스팬 등)는 기존 토글 함수가 있으면 사용
        if (typeof toggleVisibility === 'function') toggleVisibility(id);
      }
    });
  });
});
</script>
<script>
  // 박스 전체 클릭/키보드로 라디오 선택
  document.addEventListener('DOMContentLoaded', () => {
    const options = document.querySelectorAll('.auth-option');

    function refreshSelectedUI() {
      options.forEach(opt => {
        const r = opt.querySelector('input[type="radio"]');
        opt.classList.toggle('is-selected', r?.checked);
        // 접근성 역할/상태 부여(선택)
        opt.setAttribute('role', 'radio');
        opt.setAttribute('tabindex', '0');
        opt.setAttribute('aria-checked', r?.checked ? 'true' : 'false');
      });
    }

    options.forEach(opt => {
      const radio = opt.querySelector('input[type="radio"]');
      if (!radio) return;

      // 박스 아무 곳이나 클릭 → 해당 라디오 선택
      opt.addEventListener('click', (e) => {
        // 이미 라디오 자체를 클릭한 경우 중복 처리 방지
        if (e.target === radio) return;
        radio.checked = true;
        radio.dispatchEvent(new Event('change', { bubbles: true }));
        refreshSelectedUI();
      });

      // 키보드 접근성: Enter/Space로도 선택
      opt.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          radio.checked = true;
          radio.dispatchEvent(new Event('change', { bubbles: true }));
          refreshSelectedUI();
        }
      });

      // 라디오가 직접 클릭되었을 때도 UI 동기화
      radio.addEventListener('change', refreshSelectedUI);
    });

    // 초기 상태 반영
    refreshSelectedUI();
  });
</script>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const btnFinal     = document.getElementById('btnFinal');
    const agreeAll     = document.getElementById('agreeAll');
    const pwInput      = document.getElementById('accountPw');
    const prodRadios   = document.querySelectorAll('input[name="what"]');  // 해지할 상품
    const authRadios   = document.querySelectorAll('input[name="auth"]');  // 본인인증 방식

    function isProductSelected() {
      return !!document.querySelector('input[name="what"]:checked');
    }
    function isAgreeChecked() {
      return agreeAll?.checked === true;
    }
    function isAuthSelected() {
      return !!document.querySelector('input[name="auth"]:checked');
    }
    function isPasswordFilled() {
      return (pwInput?.value || '').trim().length > 0;
    }

    function updateFinalButton() {
      const canSubmit =
        isProductSelected() &&
        isAgreeChecked()   &&
        isAuthSelected()   &&
        isPasswordFilled();

      btnFinal.disabled = !canSubmit;
      btnFinal.setAttribute('aria-disabled', String(!canSubmit));
    }

    // 이벤트 바인딩
    agreeAll?.addEventListener('change', updateFinalButton);
    pwInput?.addEventListener('input', updateFinalButton);

    prodRadios.forEach(r => r.addEventListener('change', updateFinalButton));
    authRadios.forEach(r => r.addEventListener('change', updateFinalButton));

    // 혹시 초기 상태에서 값이 미리 채워진 경우 반영
    updateFinalButton();

    // (안전장치) 비활성일 때 클릭 막기
    btnFinal.addEventListener('click', (e) => {
      if (btnFinal.disabled) {
        e.preventDefault();
        e.stopPropagation();
      }
    });
  });
</script>
<div id="toast" role="status" aria-live="polite" aria-atomic="true" style="display:none;">
  해지 신청이 완료되었습니다.
</div>
<style>
  /* 완료 토스트 */
#toast{
  position: fixed;
  left: 50%; bottom: 28px;
  transform: translateX(-50%);
  min-width: 260px; max-width: 90vw;
  padding: 14px 16px;
  border-radius: 10px;
  background: #111827; color: #fff;
  box-shadow: 0 10px 24px rgba(0,0,0,.28);
  font-size: 14px; text-align: center;
  z-index: 10000;
  opacity: 0;
  transition: opacity .22s ease, transform .22s ease;
}
#toast.show{
  display: block; opacity: 1; transform: translate(-50%, -4px);
}
</style>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const btnFinal = document.getElementById('btnFinal');
    const toastEl  = document.getElementById('toast');

    // 토스트 함수
    function showToast(msg = '해지 신청이 완료되었습니다.') {
      if (!toastEl) { alert(msg); return; }   // 폴백
      toastEl.textContent = msg;
      toastEl.style.display = 'block';
      requestAnimationFrame(() => toastEl.classList.add('show'));
      // 2.2초 후 자동 닫힘
      setTimeout(() => {
        toastEl.classList.remove('show');
        setTimeout(() => { toastEl.style.display = 'none'; }, 220);
      }, 2200);
    }

    // 최종 해지 신청 클릭 처리
    btnFinal.addEventListener('click', (e) => {
      if (btnFinal.disabled) return; // 비활성 시 막기(기존 안전장치와 중복 방어)

      // UX: 처리중 상태
      const prevText = btnFinal.textContent;
      btnFinal.textContent = '처리 중...';
      btnFinal.disabled = true;
      btnFinal.setAttribute('aria-disabled', 'true');

      // 실제 API 자리: 데모로 약간의 지연 후 성공 처리
      setTimeout(() => {
        // 성공 알림
        showToast('해지 신청이 완료되었습니다.');

        // 버튼/라벨 복구(비활성 유지)
        btnFinal.textContent = prevText;
        btnFinal.disabled = true;
        btnFinal.setAttribute('aria-disabled', 'true');

        // ✅ 완료 토스트가 충분히 보인 뒤 이동
        setTimeout(() => {
          window.location.href = './mypage_prod.html';
          // 또는: window.location.assign('./mypage_prod.html');
        }, 2400); // 토스트 표시 시간(2.2s) + 여유 0.2s
      }, 800);
    });
  });
</script>
</body>
</html>