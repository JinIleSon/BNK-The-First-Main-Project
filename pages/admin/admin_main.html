<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>admin_main</title>
    
</head>
<body>
  <header>
    <div id="header"></div>
  </header>
  <script>
    // header 불러오기
    fetch("/layouts/admin_header.html")
      .then(response => {
        if (!response.ok) throw new Error("Header 파일을 불러오지 못했습니다.");
        return response.text();
      })
      .then(data => {
        document.getElementById("header").innerHTML = data;
      })
      .catch(error => console.error(error));
  </script>
  <script>
    async function includeWithScripts(targetSelector, url) {
      const res = await fetch(url, { credentials: 'same-origin' });
      if (!res.ok) throw new Error(`Failed to load ${url}`);
      const html = await res.text();

      const target = document.querySelector(targetSelector);
      target.innerHTML = html;

      // 삽입된 영역 안의 <script>들을 실행되도록 교체
      const scripts = target.querySelectorAll('script');
      for (const oldScript of scripts) {
        const newScript = document.createElement('script');

        // type, src, async, defer 등 속성 복사
        for (const { name, value } of [...oldScript.attributes]) {
          newScript.setAttribute(name, value);
        }
        // inline 스크립트라면 코드 복사
        if (!oldScript.src) newScript.text = oldScript.textContent;

        // 실행을 위해 문서에 부착
        // (src가 있으면 네트워크 로드, 없으면 즉시 실행)
        oldScript.replaceWith(newScript);

        // src 스크립트 로드를 기다려야 한다면:
        if (newScript.src) {
          await new Promise((res) => {
            newScript.addEventListener('load', res, { once: true });
            newScript.addEventListener('error', res, { once: true });
          });
        }
      }
    }

    // 사용
    includeWithScripts('#header', '/layouts/admin_header.html')
      .then(() => {
        // 필요 시 초기화 함수 호출
        if (window.initAdminHeader) window.initAdminHeader();
      })
      .catch(console.error);

    includeWithScripts('#footer', '/layouts/footer.html').catch(console.error);
  </script>

  <main style="background-color: #F6F6F8; display: flex; justify-content: center;">
    <div style="width: 1200px; ">
      <div>
        <div style="font-size: 24px; color: #4B5563;">메인페이지</div>
        <div style="display: flex;">
          <div style="font-size: 16px; color: #4B5563;">상품 현황 통계 정보, 관리 메뉴 카테고리를 관리합니다.</div>
          <div style="margin-left: auto; display: flex; justify-content: center; align-items: center; font-size: 14px; background-color: white; width: 165px; height: 40px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); border: 1px solid #E5E7EB;">
            <div style="display: flex; align-items: center;">
              <svg width="20" height="16" viewBox="0 0 20 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g clip-path="url(#clip0_194_44)">
                <path d="M7 8C8.06087 8 9.07828 7.57857 9.82843 6.82843C10.5786 6.07828 11 5.06087 11 4C11 2.93913 10.5786 1.92172 9.82843 1.17157C9.07828 0.421427 8.06087 0 7 0C5.93913 0 4.92172 0.421427 4.17157 1.17157C3.42143 1.92172 3 2.93913 3 4C3 5.06087 3.42143 6.07828 4.17157 6.82843C4.92172 7.57857 5.93913 8 7 8ZM5.57188 9.5C2.49375 9.5 0 11.9937 0 15.0719C0 15.5844 0.415625 16 0.928125 16H13.0719C13.1281 16 13.1813 15.9938 13.2375 15.9844C10.8531 14.2625 10.1187 11.5781 10.0156 9.72812C9.5125 9.57812 8.98125 9.5 8.43125 9.5H5.57188ZM15.2219 7.05312L11.4719 8.55313C11.1875 8.66875 11 8.94375 11 9.25C11 11.2281 11.8094 14.525 15.2125 15.9438C15.3969 16.0219 15.6062 16.0219 15.7906 15.9438C19.1906 14.525 20 11.2281 20 9.25C20 8.94375 19.8125 8.66875 19.5281 8.55313L15.7781 7.05312C15.6 6.98125 15.4 6.98125 15.2219 7.05312ZM18.4813 9.75C18.3594 11.3344 17.6312 13.3969 15.5 14.4281V8.55625L18.4813 9.75Z" fill="#E6002D"/>
                </g>
                <defs>
                <clipPath id="clip0_194_44">
                <path d="M0 0H20V16H0V0Z" fill="white"/>
                </clipPath>
                </defs>
              </svg>
              <div style="margin-left: 10px;">관리자: Admin</div>
            </div>
          </div>
        </div>
        <div style="display: flex; margin-top: 12px;">
          <div style="background-color: white; width: 280px; height: 136px; border-radius: 16px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); border: 1px solid #E5E7EB;">
            <div style="padding: 21px;">
              <div>
                <div style="display: flex; ">
                  <div>
                    <div style="font-size: 14px; color: #6B7280;">예금상품</div>
                    <div style="font-size: 24px; color: #2B2F36;">24</div>
                  </div>
                  <div style="display: flex; align-items: center; justify-content: center; margin-left: auto;border-radius: 8px; background-color: #f8e6e6; width: 48px; height: 48px;">
                    <svg width="23" height="20" viewBox="0 0 23 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <g clip-path="url(#clip0_185_523)">
                      <path d="M15.625 3.75V3.77734C15.418 3.76172 15.2109 3.75 15 3.75H10C9.35547 3.75 8.73047 3.83203 8.13281 3.98438C8.12891 3.90625 8.125 3.82812 8.125 3.75C8.125 1.67969 9.80469 0 11.875 0C13.9453 0 15.625 1.67969 15.625 3.75ZM15 5C15.1367 5 15.2734 5.00391 15.4062 5.01172C15.5703 5.02344 15.7344 5.03906 15.8984 5.0625C16.5859 4.26172 17.6094 3.75 18.75 3.75H19.1992C19.6055 3.75 19.9023 4.13281 19.8047 4.52734L19.2656 6.68359C19.8828 7.26172 20.3867 7.96484 20.7305 8.75H21.25C21.9414 8.75 22.5 9.30859 22.5 10V13.75C22.5 14.4414 21.9414 15 21.25 15H20C19.6445 15.4727 19.2227 15.8945 18.75 16.25V18.75C18.75 19.4414 18.1914 20 17.5 20H16.25C15.5586 20 15 19.4414 15 18.75V17.5H10V18.75C10 19.4414 9.44141 20 8.75 20H7.5C6.80859 20 6.25 19.4414 6.25 18.75V16.25C4.88672 15.2266 3.95703 13.6602 3.78125 11.875H2.65625C1.1875 11.875 0 10.6875 0 9.21875C0 7.75 1.1875 6.5625 2.65625 6.5625H2.8125C3.33203 6.5625 3.75 6.98047 3.75 7.5C3.75 8.01953 3.33203 8.4375 2.8125 8.4375H2.65625C2.22656 8.4375 1.875 8.78906 1.875 9.21875C1.875 9.64844 2.22656 10 2.65625 10H3.875C4.34766 7.66406 6.12891 5.80078 8.41797 5.20312C8.92188 5.07031 9.45312 5 10 5H15ZM17.5 10.3125C17.5 10.0639 17.4012 9.8254 17.2254 9.64959C17.0496 9.47377 16.8111 9.375 16.5625 9.375C16.3139 9.375 16.0754 9.47377 15.8996 9.64959C15.7238 9.8254 15.625 10.0639 15.625 10.3125C15.625 10.5611 15.7238 10.7996 15.8996 10.9754C16.0754 11.1512 16.3139 11.25 16.5625 11.25C16.8111 11.25 17.0496 11.1512 17.2254 10.9754C17.4012 10.7996 17.5 10.5611 17.5 10.3125Z" fill="#D91A1A"/>
                      </g>
                      <defs>
                      <clipPath id="clip0_185_523">
                      <path d="M0 0H22.5V20H0V0Z" fill="white"/>
                      </clipPath>
                      </defs>
                    </svg>
                  </div>
                </div>
                <div style="display: flex; align-items: center; margin-top: 10px;">
                  <div style="color: #D91A1A;font-size: 30px; margin-right: 5px;">•</div> 
                  <div style="font-size: 12px; color: #4B5563;">활성 상품</div>
                </div>
              </div>
            </div>
          </div>
          <div style="background-color: white;width: 285px; height: 136px; border-radius: 16px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); border: 1px solid #E5E7EB;
          margin-left: 25px;">
            <div style="padding: 21px;">
              <div>
                <div style="display: flex; ">
                  <div>
                    <div style="font-size: 14px; color: #6B7280;">적금상품</div>
                    <div style="font-size: 24px; color: #2B2F36;">18</div>
                  </div>
                  <div style="display: flex; justify-content: center; align-items: center; margin-left: auto;border-radius: 8px; background-color: #f8e6e6; width: 48px; height: 48px;">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <g clip-path="url(#clip0_185_526)">
                      <path d="M9.50778 0.101563L0.757777 3.85156C0.210902 4.08594 -0.0937856 4.67187 0.0273081 5.25C0.148402 5.82812 0.656214 6.25 1.24996 6.25V6.5625C1.24996 7.08203 1.66793 7.5 2.18746 7.5H17.8125C18.332 7.5 18.75 7.08203 18.75 6.5625V6.25C19.3437 6.25 19.8554 5.83203 19.9726 5.25C20.0898 4.66797 19.7851 4.08203 19.2422 3.85156L10.4922 0.101563C10.1797 -0.03125 9.82028 -0.03125 9.50778 0.101563ZM4.99996 8.75H2.49996V16.418C2.47653 16.4297 2.45309 16.4453 2.42965 16.4609L0.554652 17.7109C0.0976206 18.0156 -0.109411 18.5859 0.0507456 19.1133C0.210902 19.6406 0.699183 20 1.24996 20H18.75C19.3007 20 19.7851 19.6406 19.9453 19.1133C20.1054 18.5859 19.9023 18.0156 19.4414 17.7109L17.5664 16.4609C17.5429 16.4453 17.5195 16.4336 17.4961 16.418V8.75H15V16.25H13.4375V8.75H10.9375V16.25H9.06246V8.75H6.56246V16.25H4.99996V8.75ZM9.99996 2.5C10.3315 2.5 10.6494 2.6317 10.8838 2.86612C11.1183 3.10054 11.25 3.41848 11.25 3.75C11.25 4.08152 11.1183 4.39946 10.8838 4.63388C10.6494 4.8683 10.3315 5 9.99996 5C9.66844 5 9.3505 4.8683 9.11608 4.63388C8.88166 4.39946 8.74996 4.08152 8.74996 3.75C8.74996 3.41848 8.88166 3.10054 9.11608 2.86612C9.3505 2.6317 9.66844 2.5 9.99996 2.5Z" fill="#D91A1A"/>
                      </g>
                      <defs>
                      <clipPath id="clip0_185_526">
                      <path d="M0 0H20V20H0V0Z" fill="white"/>
                      </clipPath>
                      </defs>
                    </svg>
                  </div>
                </div>
                <div style="display: flex; align-items: center; margin-top: 10px;">
                  <div style="color: #D91A1A;font-size: 30px; margin-right: 5px;">•</div> 
                  <div style="font-size: 12px; color: #4B5563;">활성 상품</div>
                </div>
              </div>
            </div>
          </div>
          <div style="background-color: white;width: 285px; height: 136px; border-radius: 16px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); border: 1px solid #E5E7EB;
          margin-left: 25px;">
            <div style="padding: 21px;">
              <div>
                <div style="display: flex; ">
                  <div>
                    <div style="font-size: 14px; color: #6B7280;">신규상품</div>
                    <div style="font-size: 24px; color: #2B2F36;">6</div>
                  </div>
                  <div style="display: flex; justify-content: center; align-items: center; margin-left: auto;border-radius: 8px; background-color: #f8ebda; width: 48px; height: 48px;">
                    <svg width="23" height="20" viewBox="0 0 23 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <g clip-path="url(#clip0_185_529)">
                      <path d="M12.3789 0.703125C12.1719 0.273438 11.7344 0 11.2539 0C10.7734 0 10.3399 0.273438 10.1289 0.703125L7.6172 5.87109L2.00782 6.69922C1.53907 6.76953 1.14845 7.09766 1.00391 7.54688C0.859383 7.99609 0.97657 8.49219 1.31251 8.82422L5.38282 12.8516L4.42188 18.543C4.34376 19.0117 4.53907 19.4883 4.92579 19.7656C5.31251 20.043 5.82423 20.0781 6.2461 19.8555L11.2578 17.1797L16.2695 19.8555C16.6914 20.0781 17.2031 20.0469 17.5899 19.7656C17.9766 19.4844 18.1719 19.0117 18.0938 18.543L17.1289 12.8516L21.1992 8.82422C21.5352 8.49219 21.6563 7.99609 21.5078 7.54688C21.3594 7.09766 20.9727 6.76953 20.5039 6.69922L14.8906 5.87109L12.3789 0.703125Z" fill="#FF8B00"/>
                      </g>
                      <defs>
                      <clipPath id="clip0_185_529">
                      <path d="M0 0H22.5V20H0V0Z" fill="white"/>
                      </clipPath>
                      </defs>
                    </svg>
                  </div>
                </div>
                <div style="display: flex; align-items: center; margin-top: 10px;">
                  <div style="color: #FF8B00;font-size: 30px; margin-right: 5px;">•</div> 
                  <div style="font-size: 12px; color: #4B5563;">이번 달 출시</div>
                </div>
              </div>
            </div>
          </div>
          <div style="background-color: white;width: 285px; height: 136px; border-radius: 16px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); border: 1px solid #E5E7EB;
          margin-left: 25px;">
            <div style="padding: 21px;">
              <div>
                <div style="display: flex; ">
                  <div>
                    <div style="font-size: 14px; color: #6B7280;">전체상품</div>
                    <div style="font-size: 24px; color: #2B2F36;">48</div>
                  </div>
                  <div style="display: flex; justify-content: center; align-items: center; margin-left: auto;border-radius: 8px; background-color: #ddfced; width: 48px; height: 48px;">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M20 20H0V0H20V20Z" stroke="#E5E7EB"/>
                      <path d="M1.25 1.25C1.94141 1.25 2.5 1.80859 2.5 2.5V15.625C2.5 15.9688 2.78125 16.25 3.125 16.25H18.75C19.4414 16.25 20 16.8086 20 17.5C20 18.1914 19.4414 18.75 18.75 18.75H3.125C1.39844 18.75 0 17.3516 0 15.625V2.5C0 1.80859 0.558594 1.25 1.25 1.25ZM5 5C5 4.30859 5.55859 3.75 6.25 3.75H13.75C14.4414 3.75 15 4.30859 15 5C15 5.69141 14.4414 6.25 13.75 6.25H6.25C5.55859 6.25 5 5.69141 5 5ZM6.25 7.5H11.25C11.9414 7.5 12.5 8.05859 12.5 8.75C12.5 9.44141 11.9414 10 11.25 10H6.25C5.55859 10 5 9.44141 5 8.75C5 8.05859 5.55859 7.5 6.25 7.5ZM6.25 11.25H16.25C16.9414 11.25 17.5 11.8086 17.5 12.5C17.5 13.1914 16.9414 13.75 16.25 13.75H6.25C5.55859 13.75 5 13.1914 5 12.5C5 11.8086 5.55859 11.25 6.25 11.25Z" fill="#1CB26C"/>
                    </svg>
                  </div>
                </div>
                <div style="display: flex; align-items: center; margin-top: 10px;">
                  <div style="color: #1CB26C;font-size: 30px; margin-right: 5px;">•</div> 
                  <div style="font-size: 12px; color: #4B5563;">운영 중</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- 1) Chart.js -->
      <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1"></script>

      <!-- 2) 차트 카드 (1200px 컨테이너 안에 넣으세요) -->
      <div class="chart-card" style="
        background:#fff; border:1px solid #E5E7EB; border-radius:16px;
        box-shadow:0 2px 8px rgba(0,0,0,.05); padding:16px; margin-top:24px;
        width:100%;box-sizing:border-box;
      ">
        <div class="chart-head" style="display:flex; align-items:center;">
          <div style="margin-left: 30px; margin-top: 10px; margin-bottom: 10px;">
            <div style="font-size:20px; color:#2B2F36;">상품 통계</div>
            <div style="margin-top:7px;font-size:12px; color:#9CA3AF;">최근 6개월 추이</div>
          </div>
          <div style="margin-left:auto; margin-right: 45px; display:flex; gap:16px; align-items:center; font-size:14px; color:#4B5563;">
            <span style="display:inline-flex; align-items:center; gap:6px;">
              <span style="width:8px; height:8px; border-radius:50%; background:#D91A1A; display:inline-block;"></span> 가입
            </span>
            <span style="display:inline-flex; align-items:center; gap:6px;">
              <span style="width:8px; height:8px; border-radius:50%; background:#2B2F36; display:inline-block;"></span> 해지
            </span>
          </div>
        </div>

        <!-- 고정 폭/높이로 이미지 느낌 살림 (1200x270) -->
        <div style="margin-top:8px; width:100%; overflow:hidden; margin-bottom: 10px;">
          <canvas id="productChart" width="1200" height="270" style="display:block;"></canvas>
        </div>
      </div>

      <script>
        // ====== 초기 차트 셋업 ======
        const ctx = document.getElementById('productChart').getContext('2d');

        const initialData = {
          labels: ['7월','8월','9월','10월','11월','12월'],
          joinValues:  [180, 220, 200, 240, 280, 320], // 가입
          cancelValues:[ 40,  50,  35,  45,  55,  42]  // 해지
        };

        let productChart = new Chart(ctx, {
          type: 'line',
          data: {
            labels: initialData.labels,
            datasets: [
              {
                label: '가입',
                data: initialData.joinValues,
                borderColor: '#D91A1A',
                backgroundColor: 'rgba(217,26,26,0.10)',
                pointBackgroundColor: '#D91A1A',
                pointBorderColor: '#D91A1A',
                pointRadius: 4,
                tension: 0.3,
                borderWidth: 2
              },
              {
                label: '해지',
                data: initialData.cancelValues,
                borderColor: '#2B2F36',
                backgroundColor: 'rgba(43,47,54,0.10)',
                pointBackgroundColor: '#2B2F36',
                pointBorderColor: '#2B2F36',
                pointRadius: 4,
                tension: 0.3,
                borderWidth: 2
              }
            ]
          },
          options: {
            responsive: false,
            maintainAspectRatio: false,
            plugins: {
              legend: { display: false },
              tooltip: { mode: 'index', intersect: false }
            },
            // 오른쪽 살짝 패딩(범례/라벨 여유)
            layout: { padding: { left:16, right:80, top:16, bottom:16 } },

            scales: {
              x: {
                // ✅ 양 끝에 1/2 step 여백 추가 (첫/마지막 라벨, 포인트 안 잘림)
                offset: true,
                // 첫/마지막 눈금 기준으로 차트 영역을 잡음
                bounds: 'ticks',
                grid: { display: false },
                ticks: {
                  color: '#6B7280',
                  font: { size: 12 },
                  // 라벨끼리 붙으면 간격 조금 더 벌려줌
                  autoSkipPadding: 12,
                  padding: 6
                },
              },
              y: {
                title: { display: true, text: '건수', color: '#6B7280', font: { size: 12, weight: '600' } },
                min: 0,
                max: 400,
                ticks: { stepSize: 100, color: '#6B7280', font: { size: 12 } },
                grid: { color: '#F0F0F3' }
              }
            },

            // (옵션) 라인/포인트가 가장자리에서 잘리지 않게 살짝 허용
            elements: { line: { borderWidth: 2 }, point: { radius: 4 } }
          }
        });

        // ====== DB 연동 시 사용할 업데이트 함수 ======
        /**
         * setChartData({
         *   labels: ['7월','8월',...],
         *   joinValues:  [..가입수..],
         *   cancelValues:[..해지수..]
         * })
         */
        function setChartData({ labels, joinValues, cancelValues }) {
          if (!productChart) return;
          productChart.data.labels = labels;
          productChart.data.datasets[0].data = joinValues;
          productChart.data.datasets[1].data = cancelValues;
          productChart.update();
        }

        // ====== 예: API로 불러오기 (DB 연동) ======
        // 실제로는 서버에서 제공하는 엔드포인트를 호출하세요.
        async function loadFromApi() {
          // const res = await fetch('/api/admin/product-stats?months=6');
          // const json = await res.json();
          // setChartData({
          //   labels: json.labels,
          //   joinValues: json.join,
          //   cancelValues: json.cancel
          // });
        }

        // 필요 시 호출
        // loadFromApi();
      </script>
      <div style="display: flex; margin-top: 24px;">
        <a href="#" style="text-decoration: none;" class="menu-link">
            <div class="menu-card" style="background-color: white; width: 280px; height: 200px; border-radius: 16px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); border: 1px solid #E5E7EB;">
              <div style="padding: 21px;">
                <div>
                  <div style="display: flex;justify-content: center; margin-top: 20px;">
                    <div style="">
                      <div style="display: flex; justify-content: center;">
                        <div style="display: flex; justify-content: center; align-items: center; border-radius: 8px; background-color: #f8e6e6; width: 48px; height: 48px;">
                          <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <g clip-path="url(#clip0_185_511)">
                            <path d="M23.2453 7.80938C23.3953 8.21719 23.2687 8.67188 22.9453 8.9625L20.9156 10.8094C20.9672 11.1984 20.9953 11.5969 20.9953 12C20.9953 12.4031 20.9672 12.8016 20.9156 13.1906L22.9453 15.0375C23.2687 15.3281 23.3953 15.7828 23.2453 16.1906C23.039 16.7484 22.7906 17.2828 22.5047 17.7984L22.2843 18.1781C21.975 18.6937 21.6281 19.1812 21.2484 19.6406C20.9718 19.9781 20.5125 20.0906 20.1 19.9594L17.489 19.1297C16.8609 19.6125 16.1672 20.0156 15.4265 20.3203L14.8406 22.9969C14.7468 23.4234 14.4187 23.7609 13.9875 23.8312C13.3406 23.9391 12.675 23.9953 11.9953 23.9953C11.3156 23.9953 10.65 23.9391 10.0031 23.8312C9.57184 23.7609 9.24371 23.4234 9.14996 22.9969L8.56403 20.3203C7.8234 20.0156 7.12965 19.6125 6.50153 19.1297L3.89528 19.9641C3.48278 20.0953 3.0234 19.9781 2.74684 19.6453C2.36715 19.1859 2.02028 18.6984 1.7109 18.1828L1.49059 17.8031C1.20465 17.2875 0.956213 16.7531 0.749963 16.1953C0.599963 15.7875 0.726526 15.3328 1.04996 15.0422L3.07965 13.1953C3.02809 12.8016 2.99996 12.4031 2.99996 12C2.99996 11.5969 3.02809 11.1984 3.07965 10.8094L1.04996 8.9625C0.726526 8.67188 0.599963 8.21719 0.749963 7.80938C0.956213 7.25156 1.20465 6.71719 1.49059 6.20156L1.7109 5.82187C2.02028 5.30625 2.36715 4.81875 2.74684 4.35938C3.0234 4.02187 3.48278 3.90937 3.89528 4.04062L6.50621 4.87031C7.13434 4.3875 7.82809 3.98438 8.56871 3.67969L9.15465 1.00312C9.2484 0.576562 9.57653 0.239062 10.0078 0.16875C10.6547 0.05625 11.3203 0 12 0C12.6797 0 13.3453 0.05625 13.9922 0.164062C14.4234 0.234375 14.7515 0.571875 14.8453 0.998437L15.4312 3.675C16.1718 3.97969 16.8656 4.38281 17.4937 4.86563L20.1047 4.03594C20.5172 3.90469 20.9765 4.02187 21.2531 4.35469C21.6328 4.81406 21.9797 5.30156 22.289 5.81719L22.5093 6.19687C22.7953 6.7125 23.0437 7.24687 23.25 7.80469L23.2453 7.80938ZM12 15.75C12.9945 15.75 13.9484 15.3549 14.6516 14.6517C15.3549 13.9484 15.75 12.9946 15.75 12C15.75 11.0054 15.3549 10.0516 14.6516 9.34835C13.9484 8.64509 12.9945 8.25 12 8.25C11.0054 8.25 10.0516 8.64509 9.34831 9.34835C8.64505 10.0516 8.24996 11.0054 8.24996 12C8.24996 12.9946 8.64505 13.9484 9.34831 14.6517C10.0516 15.3549 11.0054 15.75 12 15.75Z" fill="#D91A1A"/>
                            </g>
                            <defs>
                            <clipPath id="clip0_185_511">
                            <path d="M0 0H24V24H0V0Z" fill="white"/>
                            </clipPath>
                            </defs>
                          </svg>
                        </div>
                      </div>
                      <div style="color: #2B2F36; font-size: 17px; text-align: center; margin-top: 12px;">환경설정</div>
                      <div style="color: #6B7280; font-size: 14px; text-align: center; margin-top: 12px;">시스템 설정 관리</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </a>
          <a href="#" style="text-decoration: none;" class="menu-link">
            <div class="menu-card" style="margin-left: 25px;background-color: white; width: 280px; height: 200px; border-radius: 16px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); border: 1px solid #E5E7EB;">
              <div style="padding: 21px;">
                <div>
                  <div style="display: flex;justify-content: center; margin-top: 20px;">
                    <div style="">
                      <div style="display: flex; justify-content: center;">
                        <div style="display: flex; justify-content: center; align-items: center; border-radius: 8px; background-color: #f8ebda; width: 48px; height: 48px;">
                          <svg width="17" height="20" viewBox="0 0 21 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <g clip-path="url(#clip0_185_517)">
                            <path d="M2.37656 2.74219L0 7.5H9.75V1.5H4.39219C3.53906 1.5 2.76094 1.98281 2.37656 2.74219ZM11.25 7.5H21L18.6234 2.74219C18.2391 1.98281 17.4609 1.5 16.6078 1.5H11.25V7.5ZM21 9H0V19.5C0 21.1547 1.34531 22.5 3 22.5H18C19.6547 22.5 21 21.1547 21 19.5V9Z" fill="#FF8B00"/>
                            </g>
                            <defs>
                            <clipPath id="clip0_185_517">
                            <path d="M0 0H21V24H0V0Z" fill="white"/>
                            </clipPath>
                            </defs>
                          </svg>
                        </div>
                      </div>
                      <div style="color: #2B2F36; font-size: 17px; text-align: center; margin-top: 12px;">은행 상품 관리</div>
                      <div style="color: #6B7280; font-size: 14px; text-align: center; margin-top: 12px;">금융상품 등록/수정</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </a>
          <a href="#" style="text-decoration: none;" class="menu-link">
            <div class="menu-card" style=" box-sizing: border-box;margin-left: 25px;background-color: white; width: 280px; height: 200px; border-radius: 16px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); border: 1px solid #E5E7EB;">
              <div style="padding: 21px;">
                <div>
                  <div style="display: flex;justify-content: center; margin-top: 20px;">
                    <div style="">
                      <div style="display: flex; justify-content: center;">
                        <div style="display: flex; justify-content: center; align-items: center; border-radius: 8px; background-color: #ddfced; width: 48px; height: 48px;">
                          <svg width="26" height="20" viewBox="0 0 30 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <g clip-path="url(#clip0_185_514)">
                            <path d="M6.75 0C7.74456 0 8.69839 0.395088 9.40165 1.09835C10.1049 1.80161 10.5 2.75544 10.5 3.75C10.5 4.74456 10.1049 5.69839 9.40165 6.40165C8.69839 7.10491 7.74456 7.5 6.75 7.5C5.75544 7.5 4.80161 7.10491 4.09835 6.40165C3.39509 5.69839 3 4.74456 3 3.75C3 2.75544 3.39509 1.80161 4.09835 1.09835C4.80161 0.395088 5.75544 0 6.75 0ZM24 0C24.9946 0 25.9484 0.395088 26.6516 1.09835C27.3549 1.80161 27.75 2.75544 27.75 3.75C27.75 4.74456 27.3549 5.69839 26.6516 6.40165C25.9484 7.10491 24.9946 7.5 24 7.5C23.0054 7.5 22.0516 7.10491 21.3484 6.40165C20.6451 5.69839 20.25 4.74456 20.25 3.75C20.25 2.75544 20.6451 1.80161 21.3484 1.09835C22.0516 0.395088 23.0054 0 24 0ZM0 14.0016C0 11.2406 2.24062 9 5.00156 9H7.00312C7.74844 9 8.45625 9.16406 9.09375 9.45469C9.03281 9.79219 9.00469 10.1438 9.00469 10.5C9.00469 12.2906 9.79219 13.8984 11.0344 15C11.025 15 11.0156 15 11.0016 15H0.998437C0.45 15 0 14.55 0 14.0016ZM18.9984 15C18.9891 15 18.9797 15 18.9656 15C20.2125 13.8984 20.9953 12.2906 20.9953 10.5C20.9953 10.1438 20.9625 9.79688 20.9062 9.45469C21.5438 9.15938 22.2516 9 22.9969 9H24.9984C27.7594 9 30 11.2406 30 14.0016C30 14.5547 29.55 15 29.0016 15H18.9984ZM10.5 10.5C10.5 9.30653 10.9741 8.16193 11.818 7.31802C12.6619 6.47411 13.8065 6 15 6C16.1935 6 17.3381 6.47411 18.182 7.31802C19.0259 8.16193 19.5 9.30653 19.5 10.5C19.5 11.6935 19.0259 12.8381 18.182 13.682C17.3381 14.5259 16.1935 15 15 15C13.8065 15 12.6619 14.5259 11.818 13.682C10.9741 12.8381 10.5 11.6935 10.5 10.5ZM6 22.7484C6 19.2984 8.79844 16.5 12.2484 16.5H17.7516C21.2016 16.5 24 19.2984 24 22.7484C24 23.4375 23.4422 24 22.7484 24H7.25156C6.5625 24 6 23.4422 6 22.7484Z" fill="#1CB26C"/>
                            </g>
                            <defs>
                            <clipPath id="clip0_185_514">
                            <path d="M0 0H30V24H0V0Z" fill="white"/>
                            </clipPath>
                            </defs>
                          </svg>
                        </div>
                      </div>
                      <div style="color: #2B2F36; font-size: 17px; text-align: center; margin-top: 12px;">회원 관리</div>
                      <div style="color: #6B7280; font-size: 14px; text-align: center; margin-top: 12px;">고객 정보 관리</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </a>
          <a href="#" style="text-decoration: none;" class="menu-link">
            <div class="menu-card" style="box-sizing: border-box; margin-left: 25px;background-color: white; width: 280px; height: 200px; border-radius: 16px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); border: 1px solid #E5E7EB;">
              <div style="padding: 21px;">
                <div>
                  <div style="display: flex;justify-content: center; margin-top: 20px;">
                    <div style="">
                      <div style="display: flex; justify-content: center;">
                        <div style="display: flex; justify-content: center; align-items: center;border-radius: 8px; background-color: #E5E7EB; width: 48px; height: 48px;">
                          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <g clip-path="url(#clip0_185_520)">
                            <path d="M12 2.25C6.61406 2.25 2.25 6.61406 2.25 12V13.875C2.25 14.4984 1.74844 15 1.125 15C0.501562 15 0 14.4984 0 13.875V12C0 5.37188 5.37188 0 12 0C18.6281 0 24 5.37188 24 12V18.7547C24 21.0328 22.1531 22.8797 19.8703 22.8797L14.7 22.875C14.3109 23.5453 13.5844 24 12.75 24H11.25C10.0078 24 9 22.9922 9 21.75C9 20.5078 10.0078 19.5 11.25 19.5H12.75C13.5844 19.5 14.3109 19.9547 14.7 20.625L19.875 20.6297C20.9109 20.6297 21.75 19.7906 21.75 18.7547V12C21.75 6.61406 17.3859 2.25 12 2.25ZM6.75 9.75H7.5C8.32969 9.75 9 10.4203 9 11.25V16.5C9 17.3297 8.32969 18 7.5 18H6.75C5.09531 18 3.75 16.6547 3.75 15V12.75C3.75 11.0953 5.09531 9.75 6.75 9.75ZM17.25 9.75C18.9047 9.75 20.25 11.0953 20.25 12.75V15C20.25 16.6547 18.9047 18 17.25 18H16.5C15.6703 18 15 17.3297 15 16.5V11.25C15 10.4203 15.6703 9.75 16.5 9.75H17.25Z" fill="#2B2F36"/>
                            </g>
                            <defs>
                            <clipPath id="clip0_185_520">
                            <path d="M0 0H24V24H0V0Z" fill="white"/>
                            </clipPath>
                            </defs>
                          </svg>
                        </div>
                      </div>
                      <div style="color: #2B2F36; font-size: 17px; text-align: center; margin-top: 12px;">고객센터 관리</div>
                      <div style="color: #6B7280; font-size: 14px; text-align: center; margin-top: 12px;">문의사항 및 FAQ</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </a>
        </div>
        <style>
          /* 공통 링크(카드 전체 클릭) */
          .menu-link{ text-decoration:none; color:inherit; display:block; }

          /* 카드 기본 */
          .menu-card{
            background:#fff; width:280px; height:200px; border-radius:16px;
            border:1px solid #E5E7EB; box-shadow:0 2px 8px rgba(0,0,0,.05);
            transition: transform .22s ease, box-shadow .22s ease, border-color .22s ease, background-color .22s ease;
            cursor:pointer; will-change: transform;
          }

          /* Hover: 살짝 떠오르고 그림자 강화, 보더 강조 */
          .menu-card:hover{
            transform: translateY(-4px);
            box-shadow:0 10px 24px rgba(0,0,0,.10);
            border-color:#D1D5DB;        /* 더 선명한 테두리 */
            background-color:#FCFCFD;    /* 아주 미세한 톤 변화 */
          }

          /* Active(눌렀을 때): 프레스 느낌 */
          .menu-card:active{
            transform: translateY(-1px) scale(.995);
            box-shadow:0 6px 16px rgba(0,0,0,.08);
          }

          /* 키보드 포커스 접근성: 트렌디한 링 */
          .menu-link:focus-visible .menu-card{
            outline:none;
            box-shadow:0 0 0 2px #fff, 0 0 0 4px rgba(59,130,246,.55); /* 흰색-파랑 이중링 */
            transform: translateY(-2px);
          }

          /* 모션 최소화 선호 사용자 배려 */
          @media (prefers-reduced-motion: reduce){
            .menu-card, .menu-card:hover, .menu-card:active{
              transition:none; transform:none; box-shadow:0 2px 8px rgba(0,0,0,.05);
            }
            .menu-link:focus-visible .menu-card{ box-shadow:0 0 0 3px rgba(59,130,246,.55); }
          }
        </style>
    </div>
  </main>

  <div id="bnk-chatbot-container" style="position: fixed; right: 20px; bottom: 20px; z-index: 9999;">
    <div id="bnk-chatbot-slot"></div>
  </div>
  <script>
  /**
   * 외부 HTML을 불러와서:
   *  - <link rel="stylesheet">, <style>는 <head>로 옮기고
   *  - <script>는 실행되도록 새로 만들어 붙이고 (src/inline, module 모두 지원)
   *  - 나머지 DOM(예: <flowise-chatbot> / <flowise-embed>)은 mount에 삽입
   */
  async function importHtmlWithAssets(url, mountSelector) {
    const res = await fetch(url, { credentials: 'same-origin' });
    if (!res.ok) throw new Error(`Failed to load ${url}`);
    const html = await res.text();

    const parser = new DOMParser();
    const doc = parser.parseFromString(html, 'text/html');

    // 1) <link rel="stylesheet"> 들을 <head>로
    doc.querySelectorAll('link[rel="stylesheet"]').forEach(link => {
      // 중복 로드 방지
      const href = link.getAttribute('href');
      if (href && ![...document.head.querySelectorAll('link[rel="stylesheet"]')]
        .some(l => l.getAttribute('href') === href)) {
        document.head.appendChild(link.cloneNode(true));
      }
    });

    // 2) <style> 들을 <head>로
    doc.querySelectorAll('style').forEach(styleEl => {
      const clone = document.createElement('style');
      // CSS 텍스트 보존
      clone.textContent = styleEl.textContent;
      // (가능한 속성 복사)
      [...styleEl.attributes].forEach(a => clone.setAttribute(a.name, a.value));
      document.head.appendChild(clone);
    });

    // 3) 본문 콘텐츠를 mount에 붙임 (스크립트 제외)
    const mount = document.querySelector(mountSelector);
    // fragment 구성
    const frag = document.createDocumentFragment();
    [...doc.body.children].forEach(node => {
      if (node.tagName.toLowerCase() !== 'script') frag.appendChild(node.cloneNode(true));
    });
    mount.appendChild(frag);

    // 4) 스크립트 실행 (src/inline/module 지원, 순서 보장)
    const scripts = [...doc.querySelectorAll('script')];
    for (const oldScript of scripts) {
      const newScript = document.createElement('script');
      // type/module/defer 등 속성 복사
      [...oldScript.attributes].forEach(attr => newScript.setAttribute(attr.name, attr.value));
      if (oldScript.src) {
        // 네트워크 로드를 기다려 실행 순서 유지
        await new Promise((resolve, reject) => {
          newScript.onload = resolve;
          newScript.onerror = resolve;   // 실패해도 진행(브랜딩 제거 같은 선택 기능 보호)
          document.body.appendChild(newScript);
        });
      } else {
        // inline 코드 복사
        newScript.textContent = oldScript.textContent || '';
        document.body.appendChild(newScript);
      }
    }
  }

  // 실제 호출: 기존 chatbot.html(또는 chatbot_test.html) 경로로 바꿔도 됩니다.
  importHtmlWithAssets('/components/chatbot_test.html', '#bnk-chatbot-slot')
    .catch(err => console.error('[Chatbot load failed]', err));
  </script>
  <script>
    // footer 불러오기
    fetch("/layouts/footer.html")
      .then(response => {
        if (!response.ok) throw new Error("Footer 파일을 불러오지 못했습니다.");
        return response.text();
      })
      .then(data => {
        document.getElementById("footer").innerHTML = data;
      })
      .catch(error => console.error(error));
  </script>
  <footer>
    <div id="footer"></div>
  </footer>
</body>
</html>